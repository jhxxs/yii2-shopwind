(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-trade-order-normal"],{"0217":function(t,e,i){var n=i("98c0");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("967d").default;s("7ea51cb4",n,!0,{sourceMap:!1,shadowMode:!1})},"0284":function(t,e,i){"use strict";var n=i("9593"),s=i.n(n);s.a},"092b":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("bf0f");var s=n(i("a03c")),o=n(i("b35b")),a={data:function(){return{orders:{gtype:[]},addresses:{list:[]},shippings:{},guideshop:{},shipper:{},pickuptime:"",allowsubmit:!0,integralExchange:{points:0,money:0},form:{otype:"normal",addr_id:0,region_id:0,consignee:"",phone_mob:"",delivery_type:{},postscript:{},coupon_sn:{},exchange_integral:0,anonymous:{},specs:[],extraParams:{}},redirectParams:{}}},methods:{clearInput:function(t,e){this.form.postscript[e]=""},submit:function(t){o.default.submit(this)},delivery:function(t,e){o.default.delivery(this,e)},coupon:function(t,e){o.default.coupon(this,e)},integral:function(){o.default.integral(this)},anonymous:function(t){o.default.anonymous(this,t.detail.value)},redirectTo:function(t){uni.navigateTo({url:"/pages/goods/detail?id="+t})},showPopup:function(t,e){return this.shipper={consignee:this.form.consignee,phone_mob:this.form.phone_mob},uni.$emit("onRefresh",1),this.$refs[e].open()},confirm:function(t,e){uni.setStorageSync("guideshopshipper",e),Object.assign(this.form,e),t()},openLocation:function(t){uni.openLocation({latitude:Number(t.latitude),longitude:Number(t.longitude)})},getUrl:function(){return encodeURIComponent(s.default.spliceUrl(s.default.getUrl(),Object.assign(this.redirectParams,this.form.extraParams)))}},onLoad:function(t){var e=this;s.default.verifyLogin(!0,s.default.getUrl())&&(["addr_id","otype","specs"].forEach((function(i,n){t[i]&&(e.redirectParams[i]=t[i],e.form[i]=t[i],delete t[i])})),e.form.extraParams=t,o.default.order(e),o.default.getPickupTime(e))}};e.default=a},"167e":function(t,e,i){"use strict";i.r(e);var n=i("45a4"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},"2c57e":function(t,e,i){"use strict";i.r(e);var n=i("693a"),s=i("dd81");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("4564");var a=i("828b"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"3b781cf0",null,!1,n["a"],void 0);e["default"]=r.exports},"3aa8":function(t,e,i){var n=i("a172");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("967d").default;s("b944ddd0",n,!0,{sourceMap:!1,shadowMode:!1})},4564:function(t,e,i){"use strict";var n=i("3aa8"),s=i.n(n);s.a},"45a4":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("a03c")),o={name:"uniPopupDialog",props:{title:{type:String,default:"添加提货人"},data:{type:Object,default:function(){return{}}},confimText:{type:String,default:"确定"},closeText:{type:String,default:"取消"},beforeClose:{type:Boolean,default:!1}},data:function(){return{picker:{}}},inject:["popup"],created:function(){this.popup.mkclick=!1,this.picker=this.data},methods:{confirm:function(){var t=this;return s.default.isEmpty(this.picker.consignee)?(uni.showToast({title:"提货人姓名不能为空",icon:"none"}),!1):s.default.isPhone(this.picker.phone_mob)?void this.$emit("confirm",(function(){t.popup.close()}),this.picker):(uni.showToast({title:"请输入正确的手机号",icon:"none"}),!1)},close:function(){var t=this;this.beforeClose?this.$emit("close",(function(){t.popup.close()})):this.popup.close()},clearInput:function(t,e){this.picker[e]=""}}};e.default=o},"4cb5":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("f7b7").default,uniPopup:i("9b8e3").default,myPopupPicker:i("db42").default,myFooter:i("2c57e").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["guidebuy"==t.form.otype?i("v-uni-view",[t.guideshop&&t.guideshop.id?i("v-uni-view",{staticClass:"uni-flex uni-column round-edge bgf mt10 ml10 mr10 mb10 pd10 guideshop"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between flex-middle"},[i("v-uni-text",{staticClass:"uni-bold f-16"},[t._v("提货人："+t._s(t.form.consignee)+" "+t._s(t.form.phone_mob))]),i("v-uni-view",{staticClass:"f-c60 f-15",staticStyle:{"min-width":"100rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPopup(e,"shipper")}}},[t.form.consignee&&t.form.phone_mob?i("v-uni-text",[t._v("修改")]):i("v-uni-text",[t._v("请添加提货人")]),i("uni-icons",{attrs:{type:"arrowright",color:"#ff6600"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row width-between pt10 mt10 flex-middle bt"},[i("v-uni-text",{staticClass:"uni-bold f-16"},[t._v("自提点："+t._s(t.guideshop.name))]),i("v-uni-navigator",{staticStyle:{"min-width":"100rpx"},attrs:{url:"/pages/guider/shop/list?shopid="+t.form.extraParams.shopid+"&redirect="+t.getUrl(),"hover-class":"none"}},[i("v-uni-text",{staticClass:"f-c60 f-15"},[t._v("切换")]),i("uni-icons",{attrs:{type:"arrowright",color:"#ff6600"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-column mt5"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between flex-middle"},[i("v-uni-text",{staticClass:"f-gray mr10 l-h20 width-surplus"},[t._v(t._s(t.guideshop.province||"")+t._s(t.guideshop.city||"")+t._s(t.guideshop.district||"")+t._s(t.guideshop.address))]),t.guideshop.latitude&&t.guideshop.longitude?i("v-uni-view",{staticClass:"f-c60 mr10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openLocation(t.guideshop)}}},[i("v-uni-text",{staticClass:"iconfont iconnavigation_line f-13"}),i("v-uni-text",[t._v("导航")])],1):t._e()],1),i("v-uni-view",{staticClass:"uni-flex uni-column pl10 pr10 pt10 pb10 mt10 tip f-13"},[i("v-uni-view",{staticClass:"uni-flex uni-row l-h20"},[i("v-uni-text",{staticClass:"iconfont iconanquanzhuye f-13 mr5"}),i("v-uni-text",[t._v("下单后如有问题，可联系团长为您解决。")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row l-h20"},[i("v-uni-text",{staticClass:"iconfont icongouwudai1 f-13 mr5"}),i("v-uni-text",[t._v("建议自备购物袋提货，共同助力环保~")])],1)],1)],1),i("uni-popup",{ref:"shipper",attrs:{type:"dialog"}},[i("my-popup-picker",{attrs:{data:t.shipper},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1)],1):i("v-uni-view",{staticClass:"uni-flex uni-row bgf mt10 ml10 mr10 mb10 pd10 round-edge flex-middle"},[i("uni-icons",{attrs:{type:"location"}}),i("v-uni-navigator",{staticClass:"ml10 width-surplus uni-bold f-15",attrs:{url:"/pages/guider/shop/list?redirect="+t.getUrl(),"hover-class":"none"}},[t._v("请选择提货点")]),i("uni-icons",{attrs:{type:"arrowright"}})],1)],1):t.orders.gtype.includes("material")?i("v-uni-view",[Object.values(t.addresses.list).length<=0?i("v-uni-view",{staticClass:"uni-flex uni-row bgf mt10 ml10 mr10 mb10 pd10 round-edge flex-middle"},[i("uni-icons",{attrs:{type:"location",size:"40"}}),i("v-uni-navigator",{staticClass:"ml10 width-surplus uni-bold f-15",attrs:{url:"/pages/my/address/list?action=select&redirect="+t.getUrl(),"hover-class":"none"}},[t._v("请选择收货地址")]),i("uni-icons",{attrs:{type:"arrowright"}})],1):t._e(),t._l(t.addresses.list,(function(e,n,s){return n==t.form.addr_id?i("v-uni-navigator",{key:n,staticClass:"uni-flex uni-row bgf mt10 ml10 mr10 mb10 pd10 round-edge flex-middle",attrs:{url:"/pages/my/address/list?action=select&addr_id="+e.addr_id+"&redirect="+t.getUrl(),"hover-class":"none"}},[i("uni-icons",{attrs:{type:"location"}}),i("v-uni-view",{staticClass:"uni-flex uni-column ml10 width-surplus"},[i("v-uni-text",{staticClass:"uni-bold f-15 mr10"},[t._v(t._s(e.consignee)+" "+t._s(e.phone_mob))]),i("v-uni-text",{staticClass:"f-gray"},[t._v(t._s(e.province||"")+t._s(e.city||"")+t._s(e.district||"")+t._s(e.address))])],1),i("uni-icons",{attrs:{type:"arrowright"}})],1):t._e()}))],2):t._e(),i("v-uni-view",{staticClass:"ml10 mr10 gallery mt10"},[t._l(t.orders.orderList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"round-edge pd10 mb10 bgf list"},["guidebuy"!=t.form.otype?i("v-uni-view",{staticClass:"uni-flex uni-row mb10"},[i("v-uni-navigator",{staticClass:"f-16",attrs:{"open-type":"redirect","hover-class":"none",url:"/pages/store/index?id="+e.store_id}},[t._v(t._s(e.store_name))]),i("uni-icons",{attrs:{type:"arrowright"}})],1):i("v-uni-view",{staticClass:"f-16 mb10"},[i("v-uni-text",{staticClass:"iconfont iconlishi- mr5"}),i("v-uni-text",[t._v(t._s(t.pickuptime))])],1),t._l(e.items,(function(e,n,s){return i("v-uni-view",{key:n,staticClass:"uni-flex uni-row width-between pt10 item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.redirectTo(e.goods_id)}}},[i("v-uni-view",[i("v-uni-image",{staticClass:"image",attrs:{src:e.goods_image,mode:"widthFix"}})],1),i("v-uni-view",{class:["uni-flex uni-row width-between width-surplus ml10 pt10",s>0?"bt":""],staticStyle:{"margin-top":"-20rpx"}},[i("v-uni-view",{staticClass:"uni-flex uni-column mr10"},[i("v-uni-view",{staticClass:"line-clamp-2 l-h20"},[t._v(t._s(e.goods_name))]),i("v-uni-view",{staticClass:"f-gray"},[t._v(t._s(e.specification))])],1),i("v-uni-view",{staticClass:"uni-flex uni-column"},[i("v-uni-view",[t._v(t._s(e.price||0))]),i("v-uni-view",{staticClass:"f-gray",staticStyle:{"text-align":"right"}},[t._v("x"+t._s(e.quantity||1))])],1)],1)],1)})),"guidebuy"!=t.form.otype&&t.shippings[n]?i("v-uni-view",{staticClass:"uni-flex uni-row mt10 pt10 f-15 flex-middle width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("配送费")]),i("v-uni-view",{staticClass:"uni-flex uni-row",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delivery(e,n)}}},[t._l(t.shippings[n][t.form.region_id],(function(e,s,o){return s==t.form.delivery_type[n]?i("v-uni-view",{key:s,staticClass:"f-15"},[i("v-uni-text",{staticClass:"mr10"},[t._v(t._s(e.name))]),i("v-uni-text",{staticClass:"f-red"},[t._v(t._s(t._f("currency")(e.logistic_fees)))])],1):t._e()})),i("uni-icons",{attrs:{type:"arrowright",size:"30",color:"gray"}})],2)],1):t._e(),1==e.allow_coupon&&e.coupon_list.length>0?i("v-uni-view",{staticClass:"uni-flex uni-row mt10 f-15 flex-middle width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("优惠券")]),i("v-uni-view",{staticClass:"uni-flex uni-row",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.coupon(e,n)}}},[t._l(e.coupon_list,(function(e,s){return e.coupon_sn==t.form.coupon_sn[n]?i("v-uni-view",{key:s},[i("v-uni-text",{staticClass:"mr10"},[t._v(t._s(e.name))]),i("v-uni-text",{staticClass:"f-red"},[t._v("-"+t._s(t._f("currency")(e.money)))])],1):t._e()})),0==t.form.coupon_sn[n]?i("v-uni-view",[t._v("不使用优惠券")]):t._e(),i("uni-icons",{attrs:{type:"arrowright",size:"30",color:"gray"}})],2)],1):t._e(),e.fullprefer.price>0?i("v-uni-view",{staticClass:"uni-flex uni-row mt10 f-15 flex-middle width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("商家优惠")]),i("v-uni-view",{staticClass:"f-red mr5"},[t._v("-"+t._s(t._f("currency")(e.fullprefer.price)))])],1):t._e(),i("v-uni-view",{staticClass:"uni-flex uni-row mt10 f-15 flex-middle"},[i("v-uni-view",{staticClass:"mr10 f-15"},[t._v("备注")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle"},[i("v-uni-input",{staticClass:"width-surplus",attrs:{type:"text",placeholder:"选填","placeholder-class":"placeholder"},model:{value:t.form.postscript[n],callback:function(e){t.$set(t.form.postscript,n,e)},expression:"form.postscript[store_id]"}}),i("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.form.postscript[n],expression:"form.postscript[store_id]"}],staticClass:"ml10",attrs:{size:"30",color:"gray",type:"closeempty"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput(e,n)}}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row mt10 pb5 pt5 f-15 width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("小计")]),i("v-uni-view",{staticClass:"f-red mr5 uni-bold"},[t._v(t._s(t._f("currency")(e.paymoney)))])],1)],2)})),i("v-uni-view",{staticClass:"round-edge bgf pb10 mb10"},[1==t.orders.allow_integral?i("v-uni-view",{staticClass:"uni-flex uni-row f-15 pl10 pb5 pt10 pr10 flex-middle width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("积分抵扣")]),i("v-uni-view",{staticClass:"f-15",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.integral.apply(void 0,arguments)}}},[t.form.exchange_integral>0?i("v-uni-text",{staticClass:"f-red"},[t._v("-"+t._s(t._f("currency")(t.integralExchange.money)))]):i("v-uni-text",{staticClass:"f-gray"},[t._v(t._s(t.integralExchange.money>0?"不使用积分":"不可使用积分"))]),i("uni-icons",{attrs:{size:"30",color:"gray",type:"arrowright"}})],1)],1):t._e(),i("v-uni-view",{staticClass:"uni-flex uni-row f-15 pl10 pt5 flex-middle width-between"},[i("v-uni-text",{staticClass:"mr10 f-15"},[t._v("匿名购买")]),i("v-uni-switch",{attrs:{color:"#F0AD4E"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.anonymous.apply(void 0,arguments)}}})],1)],1)],2),i("my-footer",{staticClass:"box-shadow-top paybill",attrs:{height:"50",bgcolor:"#ffffff"}},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between pt5 pb5 pl10 pr10 flex-middle"},[i("v-uni-view",{staticClass:"uni-item uni-flex mr10 f-16"},[i("v-uni-text",[t._v("合计(含运费)：")]),i("v-uni-text",{staticClass:"f-red uni-bold"},[t._v(t._s(t._f("currency")(t.orders.paymoney)))])],1),i("v-uni-view",{staticClass:"uni-item uni-center f-white uni-bold f-15 mybutton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("立即支付")])],1)],1)],1)},o=[]},"4ef9":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");n(i("8e1d"));var s={name:"MyFooter",props:{bgcolor:{type:String,default:""},height:{type:Number/String,default:0},fixed:{type:Boolean,default:!0}}};e.default=s},"521f":function(t,e,i){"use strict";i.r(e);var n=i("092b"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},"693a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"footer",style:{"--height":this.height+"px"}},[e("v-uni-view",{class:["bgp pdx",this.fixed?"fixed-bottom":""],style:{"background-color":this.bgcolor||"#ededed"}},[this._t("default")],2)],1)},s=[]},"83f8":function(t,e,i){"use strict";var n=i("0217"),s=i.n(n);s.a},9593:function(t,e,i){var n=i("9852");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("967d").default;s("1912c8d8",n,!0,{sourceMap:!1,shadowMode:!1})},9852:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".gallery .item[data-v-35bd9c8c]{width:100%}.gallery .item .image[data-v-35bd9c8c]{width:%?140?%;height:%?140?%;border-radius:%?10?%}.guideshop .tip[data-v-35bd9c8c]{background-color:#fffbf7;color:#fc2b34;border-radius:%?10?%}.paybill .mybutton[data-v-35bd9c8c]{padding:%?12?% %?50?%}",""]),t.exports=e},"98c0":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".uni-popup-dialog[data-v-f5f97836]{width:%?600?%;border-radius:%?30?%;background-color:#fff}.uni-dialog-title[data-v-f5f97836]{\ndisplay:flex;\nflex-direction:row;justify-content:center;padding-top:%?30?%;padding-bottom:%?10?%}.uni-dialog-title-text[data-v-f5f97836]{font-size:%?32?%;font-weight:500}.uni-dialog-content[data-v-f5f97836]{\ndisplay:flex;\nflex-direction:row;justify-content:center;align-items:center;padding:%?30?% %?30?% %?30?% %?30?%}.uni-dialog-content-text[data-v-f5f97836]{font-size:%?30?%;color:#6e6e6e}.uni-dialog-button-group[data-v-f5f97836]{\ndisplay:flex;\nflex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:%?2?%}.uni-dialog-button[data-v-f5f97836]{\ndisplay:flex;\nflex:1;flex-direction:row;justify-content:center;align-items:center;height:%?90?%}.uni-border-left[data-v-f5f97836]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:%?2?%}.uni-dialog-button-text[data-v-f5f97836]{font-size:%?32?%}.uni-button-color[data-v-f5f97836]{color:#007aff}.uni-dialog-input[data-v-f5f97836]{flex:1;font-size:%?30?%}",""]),t.exports=e},a172:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".footer[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部 */height:calc(var(--height) + constant(safe-area-inset-bottom));\n\t/* 兼容 IOS>11.2 */height:calc(var(--height) + env(safe-area-inset-bottom))}.footer .pdx[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),t.exports=e},b35b:function(t,e,i){"use strict";var n=i("f5bd").default;i("bf0f"),i("2797"),i("22b6"),i("aa9c"),i("e838");var s=n(i("8e1d")),o=n(i("9e19")),a=n(i("a03c"));function r(t,e){for(var i in t.shippings)t.$set(t.form.delivery_type,i,Object.values(t.shippings[i][e])[0].type)}function u(t){if(1==t.orders.allow_integral){var e=t.orders.integralExchange,i=e.maxPoints>e.userIntegral?e.userIntegral:e.maxPoints;t.integralExchange.points=i,t.integralExchange.money=e.rate*i,t.form.exchange_integral=i}}function c(t){var e=0;if(t.orders.storeIds.forEach((function(i){var n=t.form.delivery_type[i]||"express",s=a.default.isEmpty(t.shippings)||a.default.isEmpty(t.shippings[i])||!t.form.region_id?0:parseFloat(t.shippings[i][t.form.region_id][n].logistic_fees),o=a.default.isEmpty(t.orders.orderList[i].fullprefer)?0:parseFloat(t.orders.orderList[i].fullprefer.price),r=a.default.isEmpty(t.orders.orderList[i].coupon_list)?0:function(t,e){var i=t.orders.orderList[e].coupon_list;for(var n in i)if(i[n].coupon_sn==t.form.coupon_sn[e])return parseFloat(i[n].money);return 0}(t,i);t.orders.orderList[i].paymoney=parseFloat(t.orders.orderList[i].amount)+s-o-r,e+=t.orders.orderList[i].paymoney})),t.form.exchange_integral>0){var i=e-t.integralExchange.money;i<0&&(t.integralExchange.money=e,t.form.exchange_integral=e/t.orders.integralExchange.rate,i=0),e=i}t.orders.paymoney=e}t.exports={order:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id normal.js 2019.10.16 $
 * @author winder
 */
function(t){s.default.request("order/build",t.form,(function(e){if(0==e.code){if(t.orders=e.data.list,t.shippings=e.data.shipping_methods||{},t.addresses.list=e.data.my_address,t.guideshop=e.data.my_guideshop,function(t){if(a.default.isEmpty(t.addresses.list))return!1;var e=null;t.form.addr_id&&(e=t.addresses.list[t.form.addr_id]);a.default.isEmpty(e)&&(Object.values(t.addresses.list).forEach((function(t){1==t.defaddr&&(e=t)})),a.default.isEmpty(e)&&(e=Object.values(t.addresses.list)[0]));Object.assign(t.form,a.default.isEmpty(e)?{}:{addr_id:e.addr_id,region_id:e.region_id}),r(t,t.form.region_id)}(t),"guidebuy"==t.form.otype&&function(t){a.default.isEmpty(t.guideshop)||a.default.isEmpty(t.guideshop.region_id)||(Object.assign(t.form,{region_id:t.guideshop.region_id,address:t.guideshop.address}),function(t){var e=uni.getStorageSync("guideshopshipper")||null;e?Object.assign(t.form,e):s.default.request("my/order/list",{page_size:1},(function(e){if(0==e.code&&e.data){var i=e.data.list[0].order_id;s.default.request("order/extm",{order_id:i},(function(e){if(0==e.code&&e.data){var i={consignee:e.data.consignee,phone_mob:e.data.phone_mob};uni.setStorageSync("guideshopshipper",i),Object.assign(t.form,i)}}))}}))}(t),r(t,t.form.region_id))}(t),function(t){t.orders.storeIds.forEach((function(e){var i=t.orders.orderList[e].coupon_list;a.default.isEmpty(i)||t.$set(t.form.coupon_sn,e,t.orders.orderList[e].coupon_list[0].coupon_sn)}))}(t),u(t),c(t),t.orders.gtype.length>1)return uni.showModal({title:"提示",content:"实物商品和虚拟服务类商品因结算周期不同，不支持一起结算，请重新选择结算商品",showCancel:!1,complete:function(){a.default.pageBack()}})}else 4004!=e.code&&uni.showModal({content:e.message,showCancel:!1,success:function(){uni.redirectTo({url:"/pages/my/order/list"})}})}))},delivery:function(t,e){var i=[],n=t.shippings[e][t.form.region_id];for(var s in n)i.push(n[s].name+" "+(0,o.default)(n[s].logistic_fees));uni.showActionSheet({itemList:i,success:function(i){var s=Object.values(n)[i.tapIndex].type;t.form.delivery_type[e]=s,c(t)}})},coupon:function(t,e){var i=[],n=t.orders.orderList[e].coupon_list;for(var s in n)s<5&&i.push(n[s].name+" -"+(0,o.default)(n[s].money));i.push("不使用优惠券"),uni.showActionSheet({itemList:i,success:function(i){t.form.coupon_sn[e]=i.tapIndex==n.length||5==i.tapIndex?0:n[i.tapIndex].coupon_sn,u(t),c(t)}})},integral:function(t){t.integralExchange.money>0&&uni.showActionSheet({itemList:["使用积分抵扣"+(0,o.default)(t.integralExchange.money)+"元","不使用积分"],success:function(e){t.form.exchange_integral=0==e.tapIndex?t.integralExchange.points:0,c(t)}})},anonymous:function(t,e){t.orders.storeIds.forEach((function(i){t.$set(t.form.anonymous,i,e?1:0)}))},submit:function(t){if(0==t.allowsubmit)return uni.showToast({title:"请不要多次提交",icon:"none"}),!1;t.allowsubmit=!1;var e=uni.getStorageSync("distributeInviteGoodsCode")||"";s.default.request("order/create",Object.assign(t.form,{invite:e,gtype:t.orders.gtype[0]}),(function(e){0==e.code?("guidebuy"==t.form.otype&&uni.removeStorageSync("guideshopcart"),uni.redirectTo({url:"/pages/trade/cashier/pay?bizOrderId="+e.data.bizOrderId+"&bizIdentity="+e.data.bizIdentity})):uni.showToast({title:e.message,icon:"none"}),t.allowsubmit=!0}),!1)},getPickupTime:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.pickuptime=e.getMonth()+1+"月"+e.getDate()+"日16:00点前可自提"}}},b756:function(t,e,i){"use strict";i.r(e);var n=i("4cb5"),s=i("521f");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("0284");var a=i("828b"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"35bd9c8c",null,!1,n["a"],void 0);e["default"]=r.exports},c762:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("f7b7").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"uni-popup-dialog"},[i("v-uni-view",{staticClass:"uni-dialog-title"},[i("v-uni-text",{staticClass:"uni-dialog-title-text"},[t._v(t._s(t.title))])],1),i("v-uni-view",{staticClass:"uni-dialog-content"},[i("v-uni-text",{staticClass:"f-15"},[t._v("提货人")]),i("v-uni-text",{staticClass:"f-red mr10"},[t._v("*")]),i("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"text",placeholder:"请输入姓名"},model:{value:t.picker.consignee,callback:function(e){t.$set(t.picker,"consignee",e)},expression:"picker.consignee"}}),i("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.picker.consignee,expression:"picker.consignee"}],staticClass:"ml10",attrs:{type:"closeempty",color:"gray",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput(e,"consignee")}}})],1),i("v-uni-view",{staticClass:"uni-dialog-content",staticStyle:{"border-top":"2rpx #F1F1F1 dotted"}},[i("v-uni-text",{staticClass:"f-15"},[t._v("手机号")]),i("v-uni-text",{staticClass:"f-red mr10"},[t._v("*")]),i("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"number",placeholder:"请输入手机号"},model:{value:t.picker.phone_mob,callback:function(e){t.$set(t.picker,"phone_mob",e)},expression:"picker.phone_mob"}}),i("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.picker.phone_mob,expression:"picker.phone_mob"}],staticClass:"ml10",attrs:{type:"closeempty",color:"gray",size:"30"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput(e,"phone_mob")}}})],1),i("v-uni-view",{staticClass:"uni-dialog-button-group"},[i("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-dialog-button-text"},[t._v(t._s(t.closeText))])],1),i("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.confimText))])],1)],1)],1)],1)},o=[]},db42:function(t,e,i){"use strict";i.r(e);var n=i("c762"),s=i("167e");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("83f8");var a=i("828b"),r=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"f5f97836",null,!1,n["a"],void 0);e["default"]=r.exports},dd81:function(t,e,i){"use strict";i.r(e);var n=i("4ef9"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a}}]);