(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-setting-index"],{"1f1f":function(i,t,e){"use strict";e.r(t);var n=e("cce5"),s=e("3f63");for(var a in s)["default"].indexOf(a)<0&&function(i){e.d(t,i,(function(){return s[i]}))}(a);e("353e");var o=e("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"f392791e",null,!1,n["a"],void 0);t["default"]=u.exports},"353e":function(i,t,e){"use strict";var n=e("5362"),s=e.n(n);s.a},"3f63":function(i,t,e){"use strict";e.r(t);var n=e("c9cb"),s=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(i){e.d(t,i,(function(){return n[i]}))}(a);t["default"]=s.a},"4af9":function(i,t,e){i.exports=e.p+"static/images/default_user_portrait.gif"},5362:function(i,t,e){var n=e("603b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[i.i,n,""]]),n.locals&&(i.exports=n.locals);var s=e("967d").default;s("4102619d",n,!0,{sourceMap:!1,shadowMode:!1})},"603b":function(i,t,e){var n=e("c86c");t=n(!1),t.push([i.i,".portait uni-image[data-v-f392791e]{width:%?120?%;height:%?120?%;border-radius:50%}",""]),i.exports=t},b84a:function(i,t,e){"use strict";var n=e("f5bd").default;e("bf0f"),e("2797"),e("de6c");var s=n(e("39d8")),a=n(e("8e1d")),o=n(e("a03c"));i.exports={user:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id index.js 2019.10.29 $
 * @author winder
 */
function(i){a.default.request("user/read",null,(function(t){0==t.code&&(i.visitor=uni.getStorageSync("visitor")||{},Object.assign(i.visitor,t.data),uni.setStorageSync("visitor",i.visitor))}))},logout:function(i){uni.showModal({title:"提示",content:"确定退出登录？",success:function(i){i.confirm&&(uni.removeStorageSync("visitor"),uni.removeStorageSync("access_token"),uni.navigateTo({url:"/pages/user/login"}))}})},logoff:function(i){uni.showModal({title:"提示",content:"注销该账户后，该账户将无法使用，您要继续吗？",success:function(i){i.confirm&&a.default.request("user/logoff",null,(function(i){0==i.code&&(uni.removeStorageSync("visitor"),uni.removeStorageSync("access_token"),uni.switchTab({url:"/pages/index/index"}))}))}})},profile:function(i,t,e){a.default.request("user/update",(0,s.default)({},t,e),(function(n){0==n.code?uni.showToast({title:"修改成功",complete:function(){i.visitor[t]=e}}):uni.showToast({title:n.message,icon:"none"})}))},upload:function(i,t){uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){a.default.upload("upload/file",e.tempFilePaths[0],{folder:"profile/"+i.visitor.userid+"/",filename:t},(function(e){0==e.code?(i.visitor[t]=e.data.fileUrl,a.default.request("user/update",(0,s.default)({},t,e.data.fileUrl),(function(t){0==t.code?(uni.setStorageSync("visitor",i.visitor),uni.showToast({title:"上传成功"})):uni.showToast({title:t.message,icon:"none"})}))):uni.showToast({title:e.message,icon:"none"})}))},fail:function(i){uni.showModal({content:i.errMsg,showCancel:!1})}})},cache:function(i){uni.getStorageInfo({success:function(i){i.keys.forEach((function(i){"visitor"!=i&&"access_token"!=i&&uni.removeStorageSync(i)})),uni.showToast({title:"缓存已清除"})}})},connect:function(i,t,e){if("remove"==e)uni.showActionSheet({itemList:["解除绑定"],success:function(n){0==n.tapIndex&&uni.showModal({title:"提示",content:"解除绑定后，关联账号将无法登录，确定吗？",success:function(n){n.confirm&&function(i,t,e){a.default.request("remove"==e?"user/unbind":"user/bind",t,(function(n){if(0==n.code&&n.data){if(i.visitor.thirds=n.data||{},"remove"!=e){var s=uni.getStorageSync("visitor")||{};uni.setStorageSync("visitor",Object.assign(s,{openid:"APP"==t.terminal?n.data.weixinapp:n.data.weixinmp}))}uni.showToast({title:"remove"==e?"您已解除绑定":"绑定成功！",duration:2e3}),i.$forceUpdate()}else n.message&&uni.showModal({content:n.message,showCancel:!1})}))}(i,t,e)}})}});else{if(o.default.isWechat()){if("alipay"==t.logintype)return void uni.showToast({title:"请在支付宝客户端打开链接",icon:"none"})}else{if("weixin"==t.logintype)return void uni.showToast({title:"请在微信客户端打开链接",icon:"none"});if("alipay"==t.logintype&&!o.default.isAlipay())return void uni.showToast({title:"请在支付宝客户端打开链接",icon:"none"})}a.default.request("auth/connect",Object.assign(t,{callback:o.default.siteUrl()+"/pages/login/callback"}),(function(i){0==i.code&&i.data&&(uni.setStorageSync("redirect",o.default.getUrl()),location.href=i.data.redirect)}))}}}},c9cb:function(i,t,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(e("a03c")),a=n(e("b84a")),o={data:function(){return{util:s.default,visitor:{thirds:{}},genders:["女","男","保密"]}},methods:{upload:function(i){a.default.upload(this,i)},gender:function(){var i=this;uni.showActionSheet({itemList:i.genders,success:function(t){a.default.profile(i,"gender",2-t.tapIndex)}})},connect:function(i,t){a.default.connect(this,{logintype:i},t)},logout:function(){a.default.logout(this)},logoff:function(){a.default.logoff(this)},cache:function(){a.default.cache(this)}},onLoad:function(i){s.default.verifyLogin(!0,this.$mp.page.route)&&a.default.user(this)}};t.default=o},cce5:function(i,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return n}));var n={uniIcons:e("f7b7").default},s=function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("v-uni-view",{staticClass:"bgp"},[n("v-uni-view",{staticClass:"round-edge ml10 mr10 bgf mt10"},[n("v-uni-view",{staticClass:"uni-flex uni-row pd10 width-between flex-middle"},[n("v-uni-view",{staticClass:"uni-flex uni-row width-surplus portait",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.upload("portrait")}}},[i.visitor.portrait?n("v-uni-image",{attrs:{src:i.visitor.portrait,mode:"scaleToFill"}}):n("v-uni-image",{attrs:{src:e("4af9"),mode:"scaleToFill"}}),n("v-uni-view",{staticClass:"uni-flex uni-column f-gray ml10 mt5 f-14"},[n("v-uni-view",[i._v("点此设置用户头像")]),n("v-uni-text",[i._v("用户名："+i._s(i.visitor.username))])],1)],1),n("uni-icons",{attrs:{type:"arrowright"}})],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/setting/profile?field=nickname","hover-class":"none"}},[n("v-uni-text",[i._v("修改昵称")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(i.visitor.nickname))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/setting/profile?field=password","hover-class":"none"}},[n("v-uni-text",[i._v("修改密码")]),n("uni-icons",{attrs:{type:"arrowright"}})],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/address/list","hover-class":"none"}},[n("v-uni-text",[i._v("收货地址")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-view",{staticClass:"pd10 uni-bold f-15"},[i._v("关联账号")]),n("v-uni-view",{staticClass:"round-edge ml10 mr10 bgf"},[n("v-uni-view",{staticClass:"uni-flex width-between  pd10 flex-middle"},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-15"},[n("uni-icons",{staticClass:"l-h20",attrs:{type:"weixin",color:"#04BE02",size:"40"}}),n("v-uni-text",{staticClass:"ml10"},[i._v("微信")])],1),n("v-uni-view",{staticClass:"uni-flex uni-row f-15 vertical-middle"},[Object.keys(i.visitor.thirds||[]).join("").includes("weixin")?n("uni-icons",{attrs:{type:"checkbox-filled",color:"#00cc00",size:"36"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("weixin","remove")}}}):n("v-uni-text",{staticClass:"f-c60",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("weixin")}}},[i._v("未绑定")])],1)],1),n("v-uni-view",{staticClass:"uni-flex width-between pd10 flex-middle bt"},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-15"},[n("uni-icons",{staticClass:"l-h20",attrs:{type:"qq",color:"#24c9fd",size:"40"}}),n("v-uni-text",{staticClass:"ml10"},[i._v("QQ")])],1),n("v-uni-view",{staticClass:"uni-flex uni-row f-15 vertical-middle"},[Object.keys(i.visitor.thirds||[]).join("").includes("qq")?n("uni-icons",{attrs:{type:"checkbox-filled",color:"#00cc00",size:"36"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("qq","remove")}}}):n("v-uni-text",{staticClass:"f-c60",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("qq")}}},[i._v("未绑定")])],1)],1),n("v-uni-view",{staticClass:"uni-flex width-between pd10 flex-middle bt"},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-15"},[n("v-uni-text",{staticClass:"iconfont alipay"}),n("v-uni-text",{staticClass:"ml10"},[i._v("支付宝")])],1),n("v-uni-view",{staticClass:"uni-flex uni-row f-15 vertical-middle"},[Object.keys(i.visitor.thirds||[]).join("").includes("alipay")?n("uni-icons",{attrs:{type:"checkbox-filled",color:"#00cc00",size:"36"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("alipay","remove")}}}):n("v-uni-text",{staticClass:"f-c60",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.connect("alipay")}}},[i._v("未绑定")])],1)],1)],1),n("v-uni-view",{staticClass:"pd10 uni-bold f-15"},[i._v("个人信息")]),n("v-uni-view",{staticClass:"round-edge ml10 mr10 bgf"},[n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/setting/phone","hover-class":"none"}},[n("v-uni-text",[i._v("手机号码")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(i.visitor.phone_mob))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/setting/profile?field=email","hover-class":"none"}},[n("v-uni-text",[i._v("电子邮箱")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(i.visitor.email))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/my/setting/profile?field=qq","hover-class":"none"}},[n("v-uni-text",[i._v("QQ号")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(i.visitor.qq||""))]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt mt10 f-15",attrs:{url:"/pages/my/setting/profile?field=birthday","hover-class":"none"}},[n("v-uni-text",[i._v("生日")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(i.visitor.birthday||""))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"uni-flex width-between pd10 bt f-15",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.gender.apply(void 0,arguments)}}},[n("v-uni-text",[i._v("性别")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[i._v(i._s(1==i.visitor.gender?"男":2==i.visitor.gender?"女":"保密"))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-view",{staticClass:"pd10 uni-bold f-15"},[i._v("辅助功能")]),n("v-uni-view",{staticClass:"round-edge ml10 mr10 bgf"},[n("v-uni-view",{staticClass:"uni-flex width-between pd10 f-15",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.cache.apply(void 0,arguments)}}},[n("v-uni-text",[i._v("清理缓存")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/about/about","hover-class":"none"}},[n("v-uni-text",[i._v("关于")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-view",{staticClass:"pd10"},[n("v-uni-view",{staticClass:"mybutton f-white f-15 mt10",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.logout.apply(void 0,arguments)}}},[i._v("退出当前账户")]),n("v-uni-view",{staticClass:"uni-center pd10 f-15 f-gray",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.logoff.apply(void 0,arguments)}}},[i._v("注销")])],1)],1)},a=[]}}]);