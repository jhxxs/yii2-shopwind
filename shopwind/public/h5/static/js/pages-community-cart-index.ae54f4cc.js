(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-community-cart-index"],{2664:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniIcons:i("f7b7").default,myFooter:i("2c57e").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[t.cart.total>0?i("v-uni-view",{staticClass:"uni-flex uni-column ml10 mr10 mt10 bgf round-edge"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between pd10"},[i("v-uni-view",{staticClass:"uni-flex uni-row f-16"},[t._v(t._s(t.pickuptime))])],1),t._l(t.cart.list,(function(e,a){return e.quantity>0?i("v-uni-view",{key:a,staticClass:"uni-flex uni-row width-between pt10 pb10 ml10 mr10 bt"},[i("v-uni-navigator",{staticClass:"mr10",attrs:{"hover-class":"none",url:"/pages/community/goods/detail?id="+e.goods_id}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.image||e.default_image,mode:"scaleToFill"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-column width-surplus"},[i("v-uni-navigator",{staticClass:"line-clamp-2 l-h20",attrs:{"hover-class":"none",url:"/pages/community/goods/detail?id="+e.goods_id}},[t._v(t._s(e.goods_name))]),e.spec_qty>0?i("v-uni-view",{staticClass:"f-gray f-13 l-h20 mt5"},[t._v(t._s(t.specification(e)))]):t._e(),i("v-uni-view",{staticClass:"uni-flex uni-row mt10"},[i("v-uni-view",{staticClass:"f-red width-surplus"},[e.promotion?i("v-uni-text",[t._v(t._s(t._f("currency")(e.promotion.price)))]):i("v-uni-text",[t._v(t._s(t._f("currency")(e.price)))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row mr10 flex-middle",staticStyle:{"justify-content":"flex-end"}},[i("uni-icons",{attrs:{type:"minus",color:"#d8d4c7"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeQty(e,"minus")}}}),i("v-uni-text",{staticClass:"quantity uni-center"},[t._v(t._s(e.quantity))]),i("uni-icons",{attrs:{type:"plus",color:"#d8d4c7"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeQty(e,"plus")}}})],1)],1)],1)],1):t._e()}))],2):i("v-uni-view",{staticClass:"cart-empty"},[i("v-uni-view",{staticClass:"uni-center title pb10"},[i("v-uni-view",{staticClass:"iconfont icongouwuche3 f-gray flex-center empty-icons",staticStyle:{"padding-top":"60rpx"}}),i("v-uni-view",{staticClass:"uni-text-gray mb10 pb10"},[t._v("购物车竟然是空的！")]),i("v-uni-navigator",{staticClass:"enter f-white pd5",attrs:{"hover-class":"none",url:"/pages/community/index/index"}},[t._v("去逛逛")])],1)],1),i("my-footer",{attrs:{bgcolor:"#ffffff",height:"41"}},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between pd10 paybill"},[i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle relative"},[i("uni-icons",{attrs:{type:"cart",size:"50"}}),t.cart.total>0?i("v-uni-text",{staticClass:"badge f-13 absolute uni-center uni-bold"},[t._v(t._s(t.cart.total))]):t._e()],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-white flex-middle flex-center mybutton width-surplus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"f-17 line-clamp-1 l-h20"},[t._v(t._s(t._f("currency")(t.cart.paymoney))+" 去支付")]),i("uni-icons",{attrs:{type:"arrowright",color:"#ffffff",size:"30"}})],1)],1)],1)],1)},s=[]},"2c57e":function(t,e,i){"use strict";i.r(e);var a=i("693a"),n=i("dd81");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("4564");var o=i("828b"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"3b781cf0",null,!1,a["a"],void 0);e["default"]=u.exports},"3aa8":function(t,e,i){var a=i("a172");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("b944ddd0",a,!0,{sourceMap:!1,shadowMode:!1})},4564:function(t,e,i){"use strict";var a=i("3aa8"),n=i.n(a);n.a},"4ef9":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");a(i("8e1d"));var n={name:"MyFooter",props:{bgcolor:{type:String,default:""},height:{type:Number/String,default:0},fixed:{type:Boolean,default:!0}}};e.default=n},"693a":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"footer",style:{"--height":this.height+"px"}},[e("v-uni-view",{class:["bgp pdx",this.fixed?"fixed-bottom":""],style:{"background-color":this.bgcolor||"#ededed"}},[this._t("default")],2)],1)},n=[]},"76cd":function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".image[data-v-9a4eeaf6]{width:%?140?%;height:%?140?%;border-radius:%?10?%}.quantity[data-v-9a4eeaf6]{border:0;width:%?100?%;background-color:#f2f2f2;margin:%?5?% %?10?% 0 %?10?%;padding:%?8?% %?20?%;border-radius:%?30?%;font-size:%?24?%}.paybill .badge[data-v-9a4eeaf6]{background-image:linear-gradient(90deg,#ff570a,#fc2b34);border-radius:50%;color:#fff;top:%?4?%;left:%?50?%;padding:%?6?% %?8?%;min-width:%?28?%;line-height:%?28?%}.paybill .mybutton[data-v-9a4eeaf6]{padding-top:%?4?%;padding-bottom:%?4?%;word-break:break-all;min-width:80%}.cart-empty .title[data-v-9a4eeaf6]{padding-bottom:%?50?%}.cart-empty .enter[data-v-9a4eeaf6]{margin:0 auto;border-radius:%?50?%;background-image:linear-gradient(90deg,#ff570a,#fc2b34);width:%?200?%}.cart-empty .title .icon[data-v-9a4eeaf6]{font-size:%?200?%}",""]),t.exports=e},"7bf9":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i("a03c"));var n=a(i("f46e")),s=a(i("9cc8")),o={data:function(){return{cart:{list:{},quantity:{},total:0,paymoney:0},pickuptime:""}},methods:{specification:function(t){var e="";return t.spec_name_1&&(e+=t.spec_name_1+":"+t.spec_1),t.spec_name_2&&(e+=" "+t.spec_name_2+":"+t.spec_2),e},submit:function(){n.default.submit(this)},changeQty:function(t,e){t.default_spec&&(t.spec_id=t.default_spec),n.default.changeQty(this,t,e)}},onLoad:function(){s.default.getPickupTime(this)},onShow:function(){n.default.buildQty(this)}};e.default=o},"9cc8":function(t,e,i){"use strict";var a=i("f5bd").default;a(i("8e1d"));t.exports={getPickupTime:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id index.js 2019.10.9 $
 * @author winder
 */
function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.pickuptime=e.getMonth()+1+"月"+e.getDate()+"日16:00点前可自提"}}},a172:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".footer[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部 */height:calc(var(--height) + constant(safe-area-inset-bottom));\n\t/* 兼容 IOS>11.2 */height:calc(var(--height) + env(safe-area-inset-bottom))}.footer .pdx[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),t.exports=e},ad76:function(t,e,i){"use strict";i.r(e);var a=i("2664"),n=i("e72f");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("e448");var o=i("828b"),u=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"9a4eeaf6",null,!1,a["a"],void 0);e["default"]=u.exports},dd81:function(t,e,i){"use strict";i.r(e);var a=i("4ef9"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},e448:function(t,e,i){"use strict";var a=i("eb8d"),n=i.n(a);n.a},e72f:function(t,e,i){"use strict";i.r(e);var a=i("7bf9"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},eb8d:function(t,e,i){var a=i("76cd");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("0ba94b82",a,!0,{sourceMap:!1,shadowMode:!1})},f46e:function(t,e,i){"use strict";var a=i("f5bd").default;i("64aa"),i("e838"),i("aa9c"),i("d4b5");var n=a(i("8e1d")),s=a(i("a03c"));function o(t,e,i){var a=uni.getStorageSync("guideshopcart")||{list:{},quantity:{},total:0,paymoney:0};s.default.isEmpty(e)||s.default.isEmpty(e.spec_id)||s.default.isEmpty(e.goods_id)||n.default.request("goods/read",{goods_id:e.goods_id},(function(n){if(0==n.code&&n.data){if(s.default.isEmpty(a.list[e.spec_id])&&t.$set(a.list,e.spec_id,{quantity:0}),a.list[e.spec_id].quantity+=i,Object.assign(a.list[e.spec_id],e,{quantity:a.list[e.spec_id].quantity}),a.list[e.spec_id].quantity>e.stock&&(uni.showToast({title:"库存不足",icon:"none"}),i>0))return!1;s.default.isEmpty(a.quantity[e.goods_id])&&t.$set(a.quantity,e.goods_id,0),a.quantity[e.goods_id]+=i,a.total+=i,u(a),uni.setStorageSync("guideshopcart",a)}})),t.cart=a}function u(t){var e=0;for(var i in t.list){var a=t.list[i];if(a.quantity>0){var n=s.default.isEmpty(a.promotion)?a.price:a.promotion.price;e+=parseFloat(n*a.quantity)}}t.paymoney=e<=0?0:e}t.exports={addCart:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id guideshopcart.js 2019.10.19 $
 * @author winder
 */
function(t,e){var i=Number(e.quantity);o(t,e,i)},changeQty:function(t,e,i){"plus"==i?o(t,e,1):"minus"==i&&!s.default.isEmpty(t.cart.list[e.spec_id].quantity)&&t.cart.list[e.spec_id].quantity>=1&&o(t,e,-1)},buildQty:o,buildMoney:u,submit:function(t){if(t.cart.total<=0)return uni.showToast({title:"您还没有选择商品哦",icon:"none"}),!1;var e=[];for(var i in t.cart.list){var a=t.cart.list[i];a.quantity>0&&e.push({spec_id:i,quantity:a.quantity})}var n=uni.getStorageSync("guideshopid")||0;uni.navigateTo({url:"/pages/trade/order/normal?otype=guidebuy&specs="+JSON.stringify(e)+"&shopid="+n})}}}}]);