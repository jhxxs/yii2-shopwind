(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-trade-cashier-pay"],{"0bbc":function(t,e,a){"use strict";var n=a("a32e"),i=a.n(n);i.a},"14e9":function(t,e,a){"use strict";a.r(e);var n=a("e3d9"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"1e0f":function(t,e,a){"use strict";a.r(e);var n=a("926f"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"538a":function(t,e,a){var n=a("d225");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("777d4e03",n,!0,{sourceMap:!1,shadowMode:!1})},"5ab1":function(t,e,a){"use strict";var n=a("538a"),i=a.n(n);i.a},"7d15":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uniPopup:a("9b8e3").default,myPopupPay:a("ec4b").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"uni-flex uni-column round-edge ml10 mr10 mt10 mb10 paymoney"},[a("v-uni-text",{staticClass:"uni-center f-14 mt10 pt10"},[t._v("支付金额")]),a("v-uni-view",{staticClass:"uni-center amount"},[t._v(t._s(t._f("currency")(t.orderInfo.amount)))])],1),a("v-uni-view",{staticClass:"ml10 mt10 pl5 f-gray f-15"},[t._v("选择付款方式")]),a("v-uni-view",{staticClass:"ml10 mt10 mr10 mb10 bgf round-edge payments"},[a("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},t._l(Object.values(t.payments),(function(e,n){return a("v-uni-view",{key:e.code},[a("v-uni-label",{class:["uni-flex uni-row mg5 pl10 pr10 width-between flex-middle",0==n?"":"bt"]},[a("v-uni-view",{staticClass:"uni-flex uni-row flex-middle"},[a("v-uni-view",{class:["iconfont mr10",e.code]}),a("v-uni-view",{staticClass:"uni-flex uni-column"},[a("v-uni-text",{staticClass:"f-15"},[t._v(t._s(e.name))]),e.disabled_desc?a("v-uni-text",{staticClass:"f-gray f-12"},[t._v(t._s(e.disabled_desc))]):t._e()],1)],1),e.disabled?a("v-uni-radio",{staticStyle:{opacity:"0.3"},attrs:{disabled:"true"}}):a("v-uni-radio",{attrs:{value:e.code,checked:e.code==t.payment_code,color:"#fc2b34"}})],1)],1)})),1)],1),a("v-uni-view",{staticClass:"ml10 mr10 pt10 pb10"},[a("v-uni-view",{staticClass:"f-16 f-white mybutton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确认支付")])],1),a("uni-popup",{ref:"popup",staticClass:"bgnone",attrs:{type:"dialog"}},[a("my-popup-pay",{attrs:{cancelText:"忘记密码?"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.payment.apply(void 0,arguments)}}})],1)],1)},o=[]},"926f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"uniPopupDialog",props:{title:{type:String,default:"请输入"},confimText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},beforeClose:{type:Boolean,default:!1}},data:function(){return{password:""}},inject:["popup"],created:function(){this.popup.mkclick=!1},methods:{confirm:function(){var t=this;this.$emit("confirm",(function(){t.popup.close()}),this.password)},close:function(){var t=this;this.beforeClose?this.$emit("close",(function(){t.popup.close()})):this.popup.close()},cancel:function(){var t=this;this.$emit("cancel",(function(){t.popup.close()}))},clearInput:function(t,e){this.password=""}}};e.default=n},9274:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uniIcons:a("f7b7").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"uni-popup-dialog"},[a("v-uni-view",{staticClass:"uni-dialog-title relative"},[a("v-uni-text",{staticClass:"uni-dialog-title-text uni-bold"},[t._v(t._s(t.title))]),a("uni-icons",{staticClass:"absolute f-gray",attrs:{type:"closeempty",color:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}})],1),t._t("default"),a("v-uni-view",{staticClass:"uni-dialog-content"},[a("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"text",password:"true",placeholder:"输入支付密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.password,expression:"password"}],staticClass:"ml10",attrs:{type:"clear",color:"gray",size:"24"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput(e,"password")}}})],1),a("v-uni-view",{staticClass:"uni-dialog-button-group"},[a("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"uni-dialog-button-text f-c55"},[t._v(t._s(t.cancelText))])],1),a("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.confimText))])],1)],1)],2)],1)},o=[]},a32e:function(t,e,a){var n=a("b5ac");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("0371dc7f",n,!0,{sourceMap:!1,shadowMode:!1})},b5ac:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'.paymoney[data-v-0ae2558a]{background-image:linear-gradient(90deg,#ff570a,#fc2b34);color:#fff}.paymoney .amount[data-v-0ae2558a]{font-size:%?80?%;padding-bottom:%?50?%}.mybutton[data-v-0ae2558a]{background-image:linear-gradient(90deg,#dcb36b,#d68e3b);border-radius:%?20?%}.payments .iconfont[data-v-0ae2558a]{font-size:%?80?%;color:#f0ad4e}.iconfont.deposit[data-v-0ae2558a]::after{content:"\\e6ba"}.iconfont.alipay[data-v-0ae2558a]::after{color:#1677ff;content:"\\e992"}.iconfont.wxpay[data-v-0ae2558a]::after,\n.iconfont.wxapppay[data-v-0ae2558a]::after,\n.iconfont.wxmppay[data-v-0ae2558a]::after{color:#04be02;content:"\\e634"}.iconfont.cod[data-v-0ae2558a]::after{content:"\\e6bf";color:#a5f}',""]),t.exports=e},c1aa:function(t,e,a){"use strict";var n=a("f5bd").default;a("5ef2");var i=n(a("2634")),o=n(a("2fdc")),s=n(a("8e1d")),r=n(a("a03c"));function c(){return c=(0,o.default)((0,i.default)().mark((function t(e,a){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.paysubmit){t.next=3;break}return uni.showToast({title:"请务频繁支付",icon:"loading",mask:!0}),t.abrupt("return");case 3:""==e.payment_code?uni.showModal({title:"提示",content:"请选择付款方式",showCancel:!1}):(e.paysubmit=!0,setTimeout((function(){e.paysubmit=!1}),5e3),s.default.request("cashier/pay",{callback:r.default.payCallback(e.payment_code),terminal:"WAP",orderId:e.orderId,payment_code:e.payment_code,password:a},(function(t){0==t.code?t.data.redirect?location.href=t.data.redirect:"cod"==e.payment_code||"deposit"==e.payment_code?uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+t.data.payTradeNo}):uni.requestPayment({provider:e.payment_code,success:function(e){uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+t.data.payTradeNo})},fail:function(t){var e="支付失败";t.errMsg.indexOf("requestPayment:fail")>-1&&(e=t.errMsg.indexOf("cancel")>-1?"已取消支付":t.errMsg),uni.showModal({title:"提示",content:e,showCancel:!1})}}):uni.showModal({title:"提示",content:t.message,showCancel:!1})}),!0));case 4:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}t.exports={cashier:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id pay.js 2019.10.22 $
 * @author winder
 */
function(t){s.default.request("cashier/build",{bizOrderId:t.bizOrderId,terminal:"WAP",bizIdentity:t.bizIdentity},(function(e){0==e.code?(t.orderInfo=e.data.orderInfo,t.payments=e.data.payments,t.orderId=e.data.orderId,function(t){for(var e in t.payments){if(t.payments[e].selected&&!t.payments[e].disabled){t.payment_code=e;break}t.payments[e].disabled||t.payment_code||(t.payment_code=e)}}(t)):uni.showModal({title:"提示",content:e.message,showCancel:!1,success:function(){uni.redirectTo({url:"/pages/my/order/list"})}}),uni.stopPullDownRefresh()}))},submit:function(t,e){return c.apply(this,arguments)},wxpay:function(t){if(t.paysubmit)uni.showToast({title:"请务频繁支付",icon:"loading",mask:!0});else{r.default.isWechat()||uni.showToast({title:"请在微信中支付",icon:"none",mask:!0}),t.paysubmit=!0,setTimeout((function(){t.paysubmit=!1}),5e3);var e=a("83a4");e.config({debug:!1,appId:t.jsApiParameters.appId,timestamp:t.jsApiParameters.timeStamp,nonceStr:t.jsApiParameters.nonceStr,signature:t.jsApiParameters.paySign,jsApiList:["chooseWXPay"]}),e.ready((function(){e.chooseWXPay({timestamp:t.jsApiParameters.timeStamp,nonceStr:t.jsApiParameters.nonceStr,package:t.jsApiParameters.package,signType:t.jsApiParameters.signType,paySign:t.jsApiParameters.paySign,success:function(e){uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+t.orderInfo.payTradeNo})}})}))}},wxpaybuild:function(t,e){s.default.request("cashier/wxpay",e,(function(e){if(0==e.code){if(t.orderInfo=e.data.orderInfo,!e.data.jsApiParameters)return void uni.showModal({title:"提示",content:"支付参数有误，无法完成支付！",showCancel:!1,success:function(){r.default.pageBack(2)}});t.jsApiParameters=e.data.jsApiParameters}else e.message&&uni.showToast({title:e.message,icon:"error"})}),!0)}}},c323:function(t,e,a){"use strict";a.r(e);var n=a("7d15"),i=a("14e9");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("0bbc");var s=a("828b"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"0ae2558a",null,!1,n["a"],void 0);e["default"]=r.exports},d225:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".uni-popup-dialog[data-v-56d17136]{width:%?600?%;border-radius:%?30?%;background-color:#fff}.uni-dialog-title[data-v-56d17136]{\ndisplay:flex;\nflex-direction:row;justify-content:center;padding-top:%?30?%;padding-bottom:%?10?%}.uni-dialog-title-text[data-v-56d17136]{font-size:%?32?%}.uni-dialog-title .absolute[data-v-56d17136]{left:auto;right:%?30?%}.uni-dialog-content[data-v-56d17136]{\ndisplay:flex;\nflex-direction:row;justify-content:center;align-items:center;padding:%?30?% %?20?%;background-color:#fff;text-align:center}.uni-dialog-content-text[data-v-56d17136]{font-size:%?30?%;color:#6e6e6e}.uni-dialog-button-group[data-v-56d17136]{\ndisplay:flex;\nflex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:%?2?%}.uni-dialog-button[data-v-56d17136]{\ndisplay:flex;\nflex:1;flex-direction:row;justify-content:center;align-items:center;height:%?90?%}.uni-border-left[data-v-56d17136]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:%?2?%}.uni-dialog-button-text[data-v-56d17136]{font-size:%?30?%}.uni-button-color[data-v-56d17136]{color:#007aff}.uni-dialog-input[data-v-56d17136]{flex:1;font-size:%?30?%}",""]),t.exports=e},e3d9:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("a03c")),o=n(a("c1aa")),s={data:function(){return{bizOrderId:"",bizIdentity:"",orderInfo:{},payments:{},payment_code:"",orderId:"",paysubmit:!1}},methods:{change:function(t){this.payment_code=t.detail.value},submit:function(){if("deposit"==this.payment_code&&this.orderInfo.amount>0)return this.$refs.popup.open();o.default.submit(this)},cancel:function(t){i.default.redirect("/pages/deposit/setting/pay")},payment:function(t,e){o.default.submit(this,e,(function(){t()}))}},onLoad:function(t){this.bizOrderId=t.bizOrderId,this.bizIdentity=t.bizIdentity,i.default.verifyLogin(!0,this.$mp.page.route)&&o.default.cashier(this)},onPullDownRefresh:function(){o.default.cashier(this)}};e.default=s},ec4b:function(t,e,a){"use strict";a.r(e);var n=a("9274"),i=a("1e0f");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("5ab1");var s=a("828b"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"56d17136",null,!1,n["a"],void 0);e["default"]=r.exports}}]);