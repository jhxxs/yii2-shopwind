(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-webim-chat"],{"0637":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={mpHtml:a("5eef").default,myFooter:a("2c57e").default,uniIcons:a("f7b7").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"scroller"},t._l(t.gallery,(function(e,i){return a("v-uni-view",{key:i,staticClass:"uni-flex uni-column pd10 mt10"},[e.fromid==t.visitor.userid?a("v-uni-view",{staticClass:"uni-flex uni-row mb10 flex-end"},[a("v-uni-view",{staticClass:"mr10",staticStyle:{"text-align":"right"}},[a("v-uni-view",[a("v-uni-text",{staticClass:"f-gray f-12"},[t._v(t._s(e.created))])],1),a("mp-html",{staticClass:"round-edge pd10 f-white inline-block richtext",staticStyle:{"background-color":"#55aaff","text-align":"left"},attrs:{content:e.content}})],1),a("v-uni-view",{staticClass:"portrait mt10"},[a("v-uni-image",{attrs:{src:e.from.portrait}})],1)],1):a("v-uni-view",{staticClass:"uni-flex uni-row mb10"},[a("v-uni-view",{staticClass:"portrait mt10"},[a("v-uni-image",{attrs:{src:e.from.portrait}})],1),a("v-uni-view",{staticClass:"ml10"},[a("v-uni-view",{staticClass:"flex-middle"},[a("v-uni-text",[t._v(t._s(e.from.nickname||e.from.username))]),a("v-uni-text",{staticClass:"ml10 f-gray f-12"},[t._v(t._s(e.created))])],1),a("mp-html",{staticClass:"round-edge pd10 bgf inline-block richtext",attrs:{content:e.content}})],1)],1)],1)})),1),a("my-footer",[a("v-uni-view",{staticClass:"uni-flex uni-row width-between flex-middle pt10 send"},[a("v-uni-input",{staticClass:"bgf pd10 round-edge width-surplus ml10 f-12",attrs:{placeholder:"输入想说的话..."},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),a("uni-icons",{staticClass:"upload ml5 mr5",attrs:{type:"plus-filled",size:"76",color:"#ababab"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}})],1)],1)],1)},o=[]},"2c57e":function(t,e,a){"use strict";a.r(e);var i=a("693a"),n=a("dd81");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("4564");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3b781cf0",null,!1,i["a"],void 0);e["default"]=s.exports},"3aa8":function(t,e,a){var i=a("a172");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("b944ddd0",i,!0,{sourceMap:!1,shadowMode:!1})},4564:function(t,e,a){"use strict";var i=a("3aa8"),n=a.n(i);n.a},"4ef9":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");i(a("8e1d"));var n={name:"MyFooter",props:{bgcolor:{type:String,default:""},height:{type:Number/String,default:0},fixed:{type:Boolean,default:!0}}};e.default=n},"5e79":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("a03c")),o=i(a("86b4")),r={data:function(){return{visitor:{},form:{},gallery:[],timer:null}},methods:{submit:function(){o.default.submit(this)},upload:function(){o.default.upload(this)}},onLoad:function(t){this.form=t,this.visitor=uni.getStorageSync("visitor")||{},n.default.verifyLogin(!0,n.default.getUrl())&&(o.default.gallery(this,!0),this.form.store_id>0?o.default.store(this):o.default.user(this))},onShow:function(){var t=this;this.timer=setInterval((function(){o.default.gallery(t,!1)}),2e3)},onHide:function(){this.timer&&clearInterval(this.timer)},onUnload:function(){this.timer&&clearInterval(this.timer)}};e.default=r},"693a":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"footer",style:{"--height":this.height+"px"}},[e("v-uni-view",{class:["bgp pdx",this.fixed?"fixed-bottom":""],style:{"background-color":this.bgcolor||"#ededed"}},[this._t("default")],2)],1)},n=[]},"756a":function(t,e,a){"use strict";a.r(e);var i=a("0637"),n=a("7ef5");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("cad4d");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"40fa141f",null,!1,i["a"],void 0);e["default"]=s.exports},"7e7f":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scroller[data-v-40fa141f]{padding-bottom:%?120?%}.mybutton[data-v-40fa141f]{padding-top:%?0?%;padding-bottom:%?0?%;border-radius:%?20?%}.portrait[data-v-40fa141f],\n.portrait uni-image[data-v-40fa141f]{border-radius:100%;width:%?100?%;height:%?100?%}.send[data-v-40fa141f]{padding-bottom:%?30?%}.send .round-edge[data-v-40fa141f],\n.send .mybutton[data-v-40fa141f]{border-radius:%?10?%}.upload[data-v-40fa141f]{line-height:1}[data-v-40fa141f] .richtext uni-view{line-height:%?40?%}[data-v-40fa141f] uni-button::after{border:0}",""]),t.exports=e},"7ef5":function(t,e,a){"use strict";a.r(e);var i=a("5e79"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"86b4":function(t,e,a){"use strict";var i=a("f5bd").default,n=i(a("8e1d"));t.exports={store:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id chat.js 2022.5.22 $
 * @author winder
 */
function(t){n.default.request("store/read",{store_id:t.form.toid},(function(t){0==t.code&&t.data&&uni.setNavigationBarTitle({title:t.data.store_name})}))},user:function(t){n.default.request("user/read",{userid:t.form.toid},(function(t){0==t.code&&t.data&&uni.setNavigationBarTitle({title:t.data.nickname||t.data.username})}))},submit:function(t){n.default.request("webim/send",t.form,(function(e){0==e.code?t.form.content="":e.message&&uni.showToast({icon:"none",title:e.message})}))},upload:function(t){uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){n.default.upload("upload/file",e.tempFilePaths[0],{folder:"webim/"},(function(e){if(0==e.code){var a='<img width="100" src="'+e.data.fileUrl+'" />';n.default.request("webim/send",{content:a,toid:t.form.toid,store_id:t.form.store_id},(function(t){}))}}))},fail:function(t){uni.showModal({content:t.errMsg,showCancel:!1})}})},gallery:function(t,e){n.default.request("webim/logs",Object.assign(t.form,{page_size:200}),(function(e){if(0==e.code&&e.data.pagination.total>t.gallery.length){var a=t.gallery.length>0?t.gallery[t.gallery.length-1].id:0;t.gallery=e.data.list,t.gallery[t.gallery.length-1].id>a&&t.$nextTick((function(){uni.pageScrollTo({scrollTop:99999,duration:50})}))}}),e)}}},a172:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".footer[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部 */height:calc(var(--height) + constant(safe-area-inset-bottom));\n\t/* 兼容 IOS>11.2 */height:calc(var(--height) + env(safe-area-inset-bottom))}.footer .pdx[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),t.exports=e},cad4d:function(t,e,a){"use strict";var i=a("d4d5"),n=a.n(i);n.a},d4d5:function(t,e,a){var i=a("7e7f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("9bbed7ce",i,!0,{sourceMap:!1,shadowMode:!1})},dd81:function(t,e,a){"use strict";a.r(e);var i=a("4ef9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a}}]);