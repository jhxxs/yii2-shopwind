(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-seller-goods-spec"],{"02d5":function(e,t,i){"use strict";i.r(t);var n=i("2001"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"13a5":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,"uni-input[data-v-607fdeac]{text-align:right}.category[data-v-607fdeac]{background-image:linear-gradient(90deg,#f2f8f9,#f2f8f9)}.mybutton[data-v-607fdeac]{padding:%?12?% %?12?%;border-radius:%?10?%}.mybutton.gray[data-v-607fdeac]{background:#fff}.image[data-v-607fdeac]{border:%?2?% #f1f1f1 solid;width:%?70?%;height:%?70?%;border-radius:%?6?%}",""]),e.exports=t},2001:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"uniPopupDialog",props:{title:{type:String,default:"修改规格"},data:{type:Array,default:function(){return[]}}},data:function(){return{category:{}}},inject:["popup"],created:function(){this.popup.mkclick=!0,this.category=this.data},methods:{confirm:function(){var e=this;this.$emit("confirm",(function(){e.popup.close()}),this.category)},close:function(){var e=this;this.beforeClose?this.$emit("close",(function(){e.popup.close()})):this.popup.close()}}};t.default=n},"2c57e":function(e,t,i){"use strict";i.r(t);var n=i("693a"),a=i("dd81");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("4564");var o=i("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"3b781cf0",null,!1,n["a"],void 0);t["default"]=c.exports},3265:function(e,t,i){"use strict";i.r(t);var n=i("da75"),a=i("02d5");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("9d53");var o=i("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"0ee7f0ba",null,!1,n["a"],void 0);t["default"]=c.exports},"3aa8":function(e,t,i){var n=i("a172");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("b944ddd0",n,!0,{sourceMap:!1,shadowMode:!1})},"3d4c":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,"uni-input[data-v-0ee7f0ba]{text-align:right}.top-round-edge[data-v-0ee7f0ba]{min-height:%?600?%}.props .item[data-v-0ee7f0ba]{padding:%?40?% 0}",""]),e.exports=t},4564:function(e,t,i){"use strict";var n=i("3aa8"),a=i.n(n);a.a},"4ef9":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("64aa");n(i("8e1d"));var a={name:"MyFooter",props:{bgcolor:{type:String,default:""},height:{type:Number/String,default:0},fixed:{type:Boolean,default:!0}}};t.default=a},5999:function(e,t,i){"use strict";var n=i("9bcf"),a=i.n(n);a.a},"5c1a":function(e,t,i){"use strict";i.r(t);var n=i("d9a0"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"5d85":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("f7b7").default,myFooter:i("2c57e").default,uniPopup:i("9b8e3").default,myPopupProps:i("3265").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"round-edge pd10 ml10 mr10 mt10 category"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between"},[i("v-uni-text",{staticClass:"f-gray f-16"},[e._v("请给商品设置合适的规格")]),i("v-uni-text",{staticClass:"f-blue f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPopup(t,"category")}}},[e._v("编辑")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row mt10 pb5"},e._l(e.props.category,(function(t,n){return i("v-uni-view",{key:n,staticClass:"uni-flex uni-row",staticStyle:{"-webkit-flex-wrap":"wrap","flex-wrap":"wrap"}},[t.name?i("v-uni-label",{staticClass:"uni-flex uni-row mr10 pr10 l-h20"},[i("v-uni-switch",{attrs:{type:"checkbox",checked:t.selected},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.change(t,n)}}}),i("v-uni-text",[e._v(e._s(t.name))])],1):e._e()],1)})),1)],1),e._l(e.props.specs,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"round-edge bgf pd10 ml10 mr10 mt10"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between"},[i("v-uni-text",{staticClass:"uni-bold f-16"},[e._v("规格"+e._s(n+1))]),i("v-uni-text",{staticClass:"f-blue f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.del(n)}}},[e._v("删除")])],1),e._l(e.props.category,(function(t,a){return i("v-uni-view",{key:a,staticClass:"uni-flex uni-column"},[t.selected&&t.name?i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v(e._s(t.name))]),i("v-uni-input",{attrs:{placeholder:"输入"+t.name,maxlength:"30"},model:{value:e.props.specs[n]["spec_"+(a+1)],callback:function(t){e.$set(e.props.specs[n],"spec_"+(a+1),t)},expression:"props.specs[index]['spec_'+(key+1)]"}})],1):e._e()],1)})),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("规格图")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("image",n)}}},[e.props.specs[n].image?i("v-uni-view",[i("v-uni-image",{staticClass:"image",attrs:{src:e.props.specs[n].image,mode:"scaleToFill"}})],1):i("v-uni-view",{staticClass:"image vertical-middle"},[i("uni-icons",{attrs:{type:"plusempty"}})],1)],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("划线价")]),i("v-uni-view",{staticClass:"uni-flex uni-row  flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"digit",placeholder:"输入划线价",maxlength:"7"},model:{value:e.props.specs[n].mkprice,callback:function(t){e.$set(e.props.specs[n],"mkprice",t)},expression:"props.specs[index].mkprice"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("售价")]),i("v-uni-view",{staticClass:"uni-flex uni-row  flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"digit",placeholder:"输入售价",maxlength:"7"},model:{value:e.props.specs[n].price,callback:function(t){e.$set(e.props.specs[n],"price",t)},expression:"props.specs[index].price"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("库存")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"number",placeholder:"输入库存",maxlength:"5"},model:{value:e.props.specs[n].stock,callback:function(t){e.$set(e.props.specs[n],"stock",t)},expression:"props.specs[index].stock"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("件")])],1)],1)],2)],1)})),i("v-uni-view",{staticClass:"width-surplus ml10 mr10 mt10 bgf round-edge pd10 flex-middle mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.add.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"plusempty",size:"40"}}),i("v-uni-text",{staticClass:"f-16"},[e._v("规格")])],1),i("my-footer",{attrs:{height:"41"}},[i("v-uni-view",{staticClass:"uni-flex uni-row flex-center"},[i("v-uni-text",{staticClass:"mybutton uni-bold gray f-16 mt10 mb10 ml10 mr10 inline-block",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}},[e._v("取消")]),i("v-uni-text",{staticClass:"mybutton uni-bold f-white f-16 mt10 mb10 ml10 mr10 inline-block",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])],1)],1),i("uni-popup",{ref:"category",attrs:{type:"bottom"}},[i("my-popup-props",{attrs:{data:e.props.category},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}})],1)],2)},s=[]},"64ed":function(e,t,i){"use strict";i.r(t);var n=i("5d85"),a=i("5c1a");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("5999");var o=i("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"607fdeac",null,!1,n["a"],void 0);t["default"]=c.exports},"693a":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"footer",style:{"--height":this.height+"px"}},[t("v-uni-view",{class:["bgp pdx",this.fixed?"fixed-bottom":""],style:{"background-color":this.bgcolor||"#ededed"}},[this._t("default")],2)],1)},a=[]},"9bcf":function(e,t,i){var n=i("13a5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("30354510",n,!0,{sourceMap:!1,shadowMode:!1})},"9d53":function(e,t,i){"use strict";var n=i("ba3b"),a=i.n(n);a.a},a172:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".footer[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部 */height:calc(var(--height) + constant(safe-area-inset-bottom));\n\t/* 兼容 IOS>11.2 */height:calc(var(--height) + env(safe-area-inset-bottom))}.footer .pdx[data-v-3b781cf0]{\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),e.exports=t},ba3b:function(e,t,i){var n=i("3d4c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("e66a7a80",n,!0,{sourceMap:!1,shadowMode:!1})},d55f:function(e,t,i){"use strict";var n=i("f5bd").default;i("64aa");var a=n(i("8e1d")),s=n(i("a03c"));e.exports={save:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id spec.js 2020.12.27 $
 * @author winder
 */
function(e){var t=!0;for(var i in e.props.category)e.props.category[i].selected&&(t=!1);if(t&&e.props.specs.length>0)return uni.showModal({content:"至少勾选一个规格",showCancel:!1}),!1;for(var n in e.props.specs){var a=e.props.specs[n];for(var o in e.props.category)if(e.props.category[o].selected){if(s.default.isEmpty(a["spec_"+(Number(o)+1)]))return uni.showModal({content:"规格值不能为空",showCancel:!1}),!1}else a["spec_"+(Number(o)+1)]="";if(s.default.isEmpty(a.price)||Number(a.pirce)<0)return uni.showModal({content:"价格不能为空或非法",showCancel:!1}),!1;if(s.default.isEmpty(a.stock)||Number(a.stock)<0)return uni.showModal({content:"库存不能为空或非法",showCancel:!1}),!1}return!0},upload:function(e,t,i){uni.chooseImage({count:1,sizeType:["compressed"],success:function(n){a.default.upload("upload/file",n.tempFilePaths[0],{folder:"goods/",store_id:e.goods.store_id,item_id:e.goods.goods_id,thumbnail:!0},(function(n){0==n.code?(e.props.specs[i][t]=n.data.thumbnail,e.$forceUpdate()):uni.showToast({title:n.message,icon:"none"})}))},fail:function(e){uni.showModal({content:e.errMsg,showCancel:!1})}})}}},d9a0:function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("e966"),i("aa9c");var a=n(i("a03c")),s=n(i("d55f")),o={data:function(){return{goods:{},props:{category:[{name:"颜色",selected:!0},{name:"尺码",selected:!0}],specs:[{spec_1:"",spec_2:"",price:"",stock:"",image:""}]}}},methods:{showPopup:function(e,t){return this.$refs[t].open()},confirm:function(e,t){this.props.category=t,this.$forceUpdate(),e()},upload:function(e,t){s.default.upload(this,e,parseInt(t))},save:function(){s.default.save(this)&&(uni.setStorageSync("__props__",this.props),uni.navigateBack())},cancel:function(){uni.navigateBack()},change:function(e,t){this.props.category[t].selected=e.detail.value},add:function(){this.props.specs.push({spec_1:"",spec_2:"",price:"",stock:"",image:""})},del:function(e){var t=[];for(var i in this.props.specs)i!=e&&t.push(this.props.specs[i]);this.props.specs=t}},onLoad:function(e){if(a.default.verifyLogin(!0,this.$mp.page.route,!0,!0)){var t=uni.getStorageSync("__props__");!a.default.isEmpty(t)&&t.category.length>0&&(this.props.specs=t.specs,t.category.length<2&&(this.props.category[1].selected=!1),this.props.category=Object.assign(this.props.category,t.category)),this.goods=uni.getStorageSync("__goods__")||{}}}};t.default=o},da75:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("f7b7").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"bgf top-round-edge pt5 props"},[i("uni-icons",{staticClass:"ml10 absolute",attrs:{type:"closeempty",size:"44"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}),e.title?i("v-uni-view",{staticClass:"uni-bold uni-center f-16 pt5 pb10"},[e._v(e._s(e.title))]):e._e(),i("v-uni-view",{staticClass:"pd10"},e._l(e.category,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"uni-flex uni-row bt item f-16 width-between"},[i("v-uni-text",[e._v("规格"+e._s(n+1))]),i("v-uni-input",{staticClass:"width-surplus ml10",attrs:{maxlength:"20",placeholder:"输入属性名"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}})],1)],1)})),1)],1),i("v-uni-view",{staticClass:"pd10 bgf"},[i("v-uni-view",{staticClass:"uni-center f-white uni-bold f-15 mybutton",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)},s=[]},dd81:function(e,t,i){"use strict";i.r(t);var n=i("4ef9"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a}}]);