(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-trade-cashier-wxpay"],{"0b90":function(e,t,a){"use strict";a.r(t);var n=a("1f42"),i=a("7962");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("2d24");var s=a("828b"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"29be1c91",null,!1,n["a"],void 0);t["default"]=o.exports},"1f42":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"uni-flex uni-column pb10 uni-center"},[a("v-uni-view",{staticClass:"mt10 pt10 ml10 mr10"},[a("v-uni-text",{staticClass:"ml10 mr10 line-clamp-2 l-h20"},[e._v(e._s(e.orderInfo.title))])],1),a("v-uni-view",{staticClass:"amount uni-bold"},[e._v(e._s(e._f("currency")(e.orderInfo.amount)))])],1),a("v-uni-view",{staticClass:"pl10 pr10 bgf payee"},[a("v-uni-view",{staticClass:"uni-flex uni-row pd10 f-14 width-between"},[a("v-uni-text",{staticClass:"f-gray"},[e._v("收款方")]),a("v-uni-text",{staticClass:"line-clamp-1"},[e._v(e._s(e.orderInfo.payee))])],1)],1),a("v-uni-view",{staticClass:"pt10"},[a("v-uni-view",{staticClass:"mybutton pt10 pb10 f-white f-16 ml10 mr10 mt10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.wxpay.apply(void 0,arguments)}}},[e._v("立即支付")])],1)],1)},i=[]},"2d24":function(e,t,a){"use strict";var n=a("7325"),i=a.n(n);i.a},7325:function(e,t,a){var n=a("d4aa3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("3fe52a50",n,!0,{sourceMap:!1,shadowMode:!1})},7962:function(e,t,a){"use strict";a.r(t);var n=a("a12b"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},a12b:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("a03c")),r=n(a("c1aa")),s={data:function(){return{orderInfo:{title:"",amount:0,payee:"shopwind"},jsApiParameters:{},paysubmit:!1}},methods:{wxpay:function(){r.default.wxpay(this)}},onLoad:function(e){i.default.verifyLogin(!0,!1)&&r.default.wxpaybuild(this,e)}};t.default=s},c1aa:function(e,t,a){"use strict";var n=a("f5bd").default;a("5ef2");var i=n(a("2634")),r=n(a("2fdc")),s=n(a("8e1d")),o=n(a("a03c"));function d(){return d=(0,r.default)((0,i.default)().mark((function e(t,a){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.paysubmit){e.next=3;break}return uni.showToast({title:"请务频繁支付",icon:"loading",mask:!0}),e.abrupt("return");case 3:""==t.payment_code?uni.showModal({title:"提示",content:"请选择付款方式",showCancel:!1}):(t.paysubmit=!0,setTimeout((function(){t.paysubmit=!1}),5e3),s.default.request("cashier/pay",{callback:o.default.payCallback(t.payment_code),terminal:"WAP",orderId:t.orderId,payment_code:t.payment_code,password:a},(function(e){0==e.code?e.data.redirect?location.href=e.data.redirect:"cod"==t.payment_code||"deposit"==t.payment_code?uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+e.data.payTradeNo}):uni.requestPayment({provider:t.payment_code,success:function(t){uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+e.data.payTradeNo})},fail:function(e){var t="支付失败";e.errMsg.indexOf("requestPayment:fail")>-1&&(t=e.errMsg.indexOf("cancel")>-1?"已取消支付":e.errMsg),uni.showModal({title:"提示",content:t,showCancel:!1})}}):uni.showModal({title:"提示",content:e.message,showCancel:!1})}),!0));case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}e.exports={cashier:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id pay.js 2019.10.22 $
 * @author winder
 */
function(e){s.default.request("cashier/build",{bizOrderId:e.bizOrderId,terminal:"WAP",bizIdentity:e.bizIdentity},(function(t){0==t.code?(e.orderInfo=t.data.orderInfo,e.payments=t.data.payments,e.orderId=t.data.orderId,function(e){for(var t in e.payments){if(e.payments[t].selected&&!e.payments[t].disabled){e.payment_code=t;break}e.payments[t].disabled||e.payment_code||(e.payment_code=t)}}(e)):uni.showModal({title:"提示",content:t.message,showCancel:!1,success:function(){uni.redirectTo({url:"/pages/my/order/list"})}}),uni.stopPullDownRefresh()}))},submit:function(e,t){return d.apply(this,arguments)},wxpay:function(e){if(e.paysubmit)uni.showToast({title:"请务频繁支付",icon:"loading",mask:!0});else{o.default.isWechat()||uni.showToast({title:"请在微信中支付",icon:"none",mask:!0}),e.paysubmit=!0,setTimeout((function(){e.paysubmit=!1}),5e3);var t=a("83a4");t.config({debug:!1,appId:e.jsApiParameters.appId,timestamp:e.jsApiParameters.timeStamp,nonceStr:e.jsApiParameters.nonceStr,signature:e.jsApiParameters.paySign,jsApiList:["chooseWXPay"]}),t.ready((function(){t.chooseWXPay({timestamp:e.jsApiParameters.timeStamp,nonceStr:e.jsApiParameters.nonceStr,package:e.jsApiParameters.package,signType:e.jsApiParameters.signType,paySign:e.jsApiParameters.paySign,success:function(t){uni.redirectTo({url:"/pages/trade/cashier/result?payTradeNo="+e.orderInfo.payTradeNo})}})}))}},wxpaybuild:function(e,t){s.default.request("cashier/wxpay",t,(function(t){if(0==t.code){if(e.orderInfo=t.data.orderInfo,!t.data.jsApiParameters)return void uni.showModal({title:"提示",content:"支付参数有误，无法完成支付！",showCancel:!1,success:function(){o.default.pageBack(2)}});e.jsApiParameters=t.data.jsApiParameters}else t.message&&uni.showToast({title:t.message,icon:"error"})}),!0)}}},d4aa3:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,".amount[data-v-29be1c91]{height:%?200?%;font-size:%?80?%}.payee[data-v-29be1c91]{border-top:%?2?% #dedede solid;border-bottom:%?2?% #dedede solid;margin-bottom:%?30?%;padding:%?2?% 0}.mybutton[data-v-29be1c91]{border-radius:%?10?%;background:#57be6a}",""]),e.exports=t}}]);