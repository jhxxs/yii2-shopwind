import{r as C,x as H,z as L,b as K,d as r,o as m,g as I,h as a,f as d,a as e,c as w,l as q,F as N,n as M,i as g,t as T,k as F,j as Q,u as W,e as X,w as Y,S as Z,q as ee,v as le,K as te,m as ae}from"./index.a58ce339.js";import{a as oe,b as se}from"./delivery.e0452059.js";import{r as O}from"./region.98e2d634.js";import{a as G}from"./blocks.ba26e4d1.js";import{m as ne}from"./seller.d64b714b.js";import{_ as de}from"./user.fc5752a9.js";import{m as ie}from"./seller.1b3a82a4.js";import"./chat.ded1e0ec.js";const re={class:"uni-flex uni-row gallery"},ue=["onClick"],_e={class:"mb20"},ce=g("\u5173\u95ED"),fe=g("\u63D0\u4EA4"),me={props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},data:{type:[Object,Array],default:()=>({})},original:{type:String,default:""}},emits:["close"],setup(V,{emit:S}){const k=V,c=C(!1),x=C(!1);H({original:[]});const u=H({list:[],all:{}});L(()=>k.visible,t=>{c.value=t}),L(()=>k.data,t=>{}),L(()=>k.original,t=>{}),K(()=>{O({parent_id:0,page_size:100},t=>{if(t.list.length>0){t.list[0].current=!0,u.list.push(t.list);let l=t.list[0];u.all[l.region_id]=l,O({parent_id:l.region_id,page_size:100},o=>{u.list.push(o.list),u.all[l.region_id].children=o.list})}})});const A=()=>{c.value=!1,S("close",n())},j=()=>{c.value=!1,S("close",null)},B=(t,l)=>{t>0?R(t):D(t,l)},R=t=>{let l=[];u.list[t].forEach(o=>{o.checked&&l.push(o)}),u.list[t-1].forEach(o=>{o.current&&(l.length==0?(o.checked=!1,o.indeterminate=!1):l.length==u.list[t].length?(o.checked=!0,o.indeterminate=!1):o.indeterminate=!0)})};function D(t,l,o){l.indeterminate=!1,u.list[t].forEach(f=>{f.current=f==l}),O({parent_id:l.region_id,page_size:100},f=>{l.children=f.list,u.all[l.region_id]=l,f.list.length>0&&(f.list.forEach(_=>{_.checked=!!l.checked}),typeof o=="function"?o(f.list):u.list[t+1]=f.list)})}function n(){let t=[[],[]];return Object.values(u.all).forEach(l=>{l.disabled||(l.checked&&!l.indeterminate?(t[0].push(l.name),t[1].push(parseInt(l.region_id))):l.indeterminate&&l.children.forEach(o=>{o.checked&&(t[0].push(o.name),t[1].push(parseInt(o.region_id)))}))}),t}return(t,l)=>{const o=r("el-checkbox"),f=r("ArrowRight"),_=r("el-icon"),y=r("el-scrollbar"),h=r("el-button"),U=r("el-dialog");return m(),I(U,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=$=>c.value=$),width:700,title:V.title,center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":j},{footer:a(()=>[d("div",_e,[e(h,{onClick:j},{default:a(()=>[ce]),_:1}),e(h,{type:"primary",onClick:A,loading:x.value},{default:a(()=>[fe]),_:1},8,["loading"])])]),default:a(()=>[d("div",re,[(m(!0),w(N,null,q(Q(u).list,($,E)=>(m(),I(y,{height:300,class:"list"},{default:a(()=>[(m(!0),w(N,null,q($,(p,P)=>(m(),w("div",{class:M(["uni-flex uni-row width-between  flex-middle pl10 pr10",p.current?"current":""])},[e(o,{onChange:z=>{B(E,p)},modelValue:p.checked,"onUpdate:modelValue":z=>p.checked=z,label:p.region_id,indeterminate:p.indeterminate,disabled:p.disabled},{default:a(()=>[g(T(p.name),1)]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","label","indeterminate","disabled"]),d("p",{onClick:z=>B(E,p),class:"width-surplus",style:{"text-align":"right"}},[E==0?(m(),I(_,{key:0},{default:a(()=>[e(f)]),_:1})):F("",!0)],8,ue)],2))),256))]),_:2},1024))),256))])]),_:1},8,["modelValue","title"])}}};var pe=G(me,[["__scopeId","data-v-88c83b92"]]);const v=V=>(ee("data-v-39339b39"),V=V(),le(),V),he={class:"main w pt10"},be={class:"round-edge pd10 bgf"},ge={class:"pd10"},ve=g("\u7269\u6D41"),Ve=g("\u8FD0\u8D39\u8BBE\u7F6E"),ke={class:"round-edge pd10 bgf mt20"},we=v(()=>d("span",{class:"f-gray f-13"},'\u9664\u6307\u5B9A\u5730\u533A\u5916\uFF0C\u5176\u4F59\u5730\u533A\u7684\u8FD0\u8D39\u91C7\u7528"\u9ED8\u8BA4\u8FD0\u8D39"',-1)),ye=v(()=>d("span",null,"\u9ED8\u8BA4\u8FD0\u8D39\uFF1A",-1)),Ce=v(()=>d("span",null,"\u4EF6\u5185\uFF0C",-1)),xe=v(()=>d("span",null,"\u5143\uFF0C",-1)),Ue=v(()=>d("span",null,"\u6BCF\u589E\u52A0",-1)),$e=v(()=>d("span",null,"\u4E2A\uFF0C",-1)),Ee=v(()=>d("span",null,"\u589E\u52A0\u8FD0\u8D39",-1)),ze=v(()=>d("span",null,"\u5143",-1)),Ie={key:0},Se=g("\u4FEE\u6539\u5730\u533A "),je=g("\u5220\u9664 "),Be={class:"f-blue f-13 flex-middle mt5"},Ne=["onClick"],Ae=g("\u63D0\u4EA4"),Re={setup(V){const S=W(),k=C(!1),c=C({name:"\u9ED8\u8BA4\u6A21\u677F",area_fee:{express:{default_fee:{}}}}),x=C(!1),u=C({});K(()=>{oe({id:S.params.id},n=>{n&&(c.value=Object.assign(n,{id:n.template_id}))})});const A=n=>{Z(n.other_fee)&&(n.other_fee=[]),n.other_fee.push({})},j=n=>{x.value=!0,u.value=n},B=(n,t)=>{n.other_fee.splice(t,1)},R=()=>{se(c.value,n=>{te({title:"\u63D0\u793A",message:"\u8FD0\u8D39\u6A21\u677F\u8BBE\u7F6E\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:()=>{ae("/seller/delivery/list")}})},k)},D=n=>{x.value=!1,n&&(u.value.dests=n[0].join(","),u.value.dest_ids=n[1].join("|"))};return(n,t)=>{const l=r("el-col"),o=r("el-breadcrumb-item"),f=r("el-breadcrumb"),_=r("el-input"),y=r("el-form-item"),h=r("el-table-column"),U=r("el-button"),$=r("el-table"),E=r("CirclePlus"),p=r("el-icon"),P=r("el-form"),z=r("el-row"),J=X("loading");return m(),w(N,null,[e(ne),d("div",he,[e(z,{gutter:12},{default:a(()=>[e(l,{span:4},{default:a(()=>[e(ie)]),_:1}),e(l,{span:20},{default:a(()=>[d("div",be,[d("div",ge,[e(f,{separator:"/"},{default:a(()=>[e(o,null,{default:a(()=>[ve]),_:1}),e(o,null,{default:a(()=>[Ve]),_:1})]),_:1})])]),d("div",ke,[e(P,{inline:!0,class:"pd10"},{default:a(()=>[e(y,{label:"\u6A21\u677F\u540D\u79F0","label-width":100},{default:a(()=>[e(_,{modelValue:c.value.name,"onUpdate:modelValue":t[0]||(t[0]=i=>c.value.name=i),clearable:""},null,8,["modelValue"])]),_:1}),e(y,{label:"\u8FD0\u8D39\u89C4\u5219","label-width":100},{default:a(()=>[we]),_:1}),c.value.name?(m(),I(y,{key:0,label:"\u914D\u9001\u65B9\u5F0F","label-width":100,style:{"margin-right":"0"}},{default:a(()=>[(m(!0),w(N,null,q(c.value.area_fee,i=>(m(),w("div",null,[d("p",null,T(i.name),1),d("div",{class:M(["uni-flex uni-row f-13 pd10 border",i.other_fee&&i.other_fee.length>0?"border-b0":""])},[ye,e(_,{modelValue:i.default_fee.start_standards,"onUpdate:modelValue":s=>i.default_fee.start_standards=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),Ce,e(_,{modelValue:i.default_fee.start_fees,"onUpdate:modelValue":s=>i.default_fee.start_fees=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),xe,Ue,e(_,{modelValue:i.default_fee.add_standards,"onUpdate:modelValue":s=>i.default_fee.add_standards=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),$e,Ee,e(_,{modelValue:i.default_fee.add_fees,"onUpdate:modelValue":s=>i.default_fee.add_fees=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),ze],2),i.other_fee&&i.other_fee.length>0?(m(),w("div",Ie,[Y((m(),I($,{data:i.other_fee,border:!0,stripe:!1,class:"f-13"},{default:a(()=>[e(h,{prop:"dests",label:"\u914D\u9001\u5730\u533A"}),e(h,{prop:"start_standards",label:"\u9996\u4EF6"},{default:a(s=>[e(_,{modelValue:s.row.start_standards,"onUpdate:modelValue":b=>s.row.start_standards=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"start_fees",label:"\u9996\u8D39(\u5143)"},{default:a(s=>[e(_,{modelValue:s.row.start_fees,"onUpdate:modelValue":b=>s.row.start_fees=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"add_standards",label:"\u7EED\u4EF6"},{default:a(s=>[e(_,{modelValue:s.row.add_standards,"onUpdate:modelValue":b=>s.row.add_standards=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"add_fees",label:"\u7EED\u8D39(\u5143)"},{default:a(s=>[e(_,{modelValue:s.row.add_fees,"onUpdate:modelValue":b=>s.row.add_fees=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{fixed:"right",label:"\u64CD\u4F5C",width:"160",align:"center"},{default:a(s=>[e(U,{type:"primary",size:"small",onClick:b=>j(s.row),plain:""},{default:a(()=>[Se]),_:2},1032,["onClick"]),e(U,{type:"warning",size:"small",onClick:b=>B(i,s.$index),plain:""},{default:a(()=>[je]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])),[[J,k.value]])])):F("",!0),d("div",Be,[e(p,{size:16},{default:a(()=>[e(E)]),_:1}),d("span",{onClick:s=>A(i),class:"ml5 pointer"},"\u6DFB\u52A0\u6307\u5B9A\u5730\u533A\u8FD0\u8D39",8,Ne)])]))),256))]),_:1})):F("",!0),e(y,{label:" ","label-width":100},{default:a(()=>[e(U,{type:"primary",onClick:R,loading:k.value},{default:a(()=>[Ae]),_:1},8,["loading"])]),_:1})]),_:1})])]),_:1})]),_:1})]),e(pe,{title:"\u9009\u62E9\u5730\u533A",visible:x.value,original:u.value.dest_ids,onClose:D},null,8,["visible","original"]),e(de)],64)}}};var Me=G(Re,[["__scopeId","data-v-39339b39"]]);export{Me as default};
