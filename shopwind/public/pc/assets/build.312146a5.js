import{u as A,r as N,x as k,b as G,d as o,o as f,c as h,a as e,f as l,h as t,j as _,F as R,g as H,t as V,k as S,i as r,l as K,E as P,q as Q,v as X,L as Y,J as Z}from"./index.63485ad7.js";import{a as ee,d as te,k as le}from"./blocks.ed01be35.js";import{a as se,b as oe}from"./wholesale.01f08e91.js";import{s as ae}from"./list.4e08a3b3.js";import{m as ie}from"./seller.19de717e.js";import{_ as ne}from"./user.ca2642db.js";import{m as de}from"./seller.72cf562b.js";import"./multiselector.324534f4.js";import"./chat.2d6ea877.js";const B=b=>(Q("data-v-40f76c70"),b=b(),X(),b),ce={class:"main w pt10"},_e={class:"round-edge pd10 bgf"},re={class:"pd10"},ue=r("\u8425\u9500"),pe=r("\u6279\u53D1\u4EF7"),me={class:"round-edge pd10 bgf mt20"},fe=B(()=>l("h3",{class:"pd10 mb20"},"\u6279\u53D1\u4EF7\u8BBE\u7F6E",-1)),be=r("\u9009\u62E9\u5546\u54C1"),ge={class:"uni-flex uni-row"},he=["src"],ve={class:"l-h20 width-surplus ml10"},we={class:"tips pl10 pr10 pt5 pb5 f-12 f-c60 flex-middle",style:{width:"100%"}},ye=r(" \u6279\u53D1\u4EF7\u9002\u7528\u4E8E\u6240\u6709\u89C4\u683C\uFF0C\u6682\u4E0D\u652F\u6301\u6307\u5B9A\u89C4\u683C\u8BBE\u7F6E\u6279\u53D1\u4EF7 "),ke={class:"uni-flex uni-column ml10 mr10"},Ve=r("\u8D2D\u4E70 "),xe=r(" \u4EF6\u4EE5\u4E0A\uFF0C\u5219 "),Ce=r(" \u5143/\u4EF6 "),qe=["onClick"],Ie=B(()=>l("text",{class:"ml20 mr20"},"\u63D0\u4EA4",-1)),Ue={setup(b){const x=A(),C=N(!1),d=k({visible:!1,selected:[]}),i=k({status:1,rules:[{}]}),v=k({list:[]}),n=N({});G(()=>{x.params.goods_id>0&&se({goods_id:x.params.goods_id},s=>{s&&(Object.assign(i,s,{status:parseInt(s.rules[0].status)}),d.selected=[parseInt(i.goods_id)],q())})});const E=()=>{i.rules.push({})},F=s=>{i.rules.splice(s,1)},j=s=>{i.status=s},$=()=>{if(v.list.length<1)return P.warning("\u8BF7\u9009\u62E9\u5546\u54C1");oe(Object.assign(i,{goods_id:n.value.goods_id}),s=>{Y({title:"\u63D0\u793A",message:"\u6279\u53D1\u5546\u54C1\u8BBE\u7F6E\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:function(){Z.replace("/seller/wholesale/list")}})},C)},L=s=>{d.visible=!1,d.selected=s||[],d.selected.length>0&&q()};function q(){te({goods_id:d.selected[d.selected.length-1]},s=>{n.value=s,le({goods_id:s.goods_id},u=>{for(let m in u.list){let c=u.list[m];v.list[m]={specification:c.spec_1+" "+c.spec_2,price:c.price,stock:c.stock,image:c.image,spec_id:c.spec_id}}})})}return(s,u)=>{const m=o("el-col"),c=o("el-breadcrumb-item"),M=o("el-breadcrumb"),I=o("el-button"),p=o("el-form-item"),O=o("WarningFilled"),W=o("el-icon"),w=o("el-table-column"),z=o("el-table"),U=o("el-input-number"),D=o("el-switch"),J=o("el-form"),T=o("el-row");return f(),h(R,null,[e(ie),l("div",ce,[e(T,{gutter:12},{default:t(()=>[e(m,{span:4},{default:t(()=>[e(de)]),_:1}),e(m,{span:20},{default:t(()=>[l("div",_e,[l("div",re,[e(M,{separator:"/"},{default:t(()=>[e(c,null,{default:t(()=>[ue]),_:1}),e(c,null,{default:t(()=>[pe]),_:1})]),_:1})])]),l("div",me,[fe,e(J,{inline:!0,class:"pd10"},{default:t(()=>[e(p,{label:"\u9009\u62E9\u5546\u54C1","label-width":100},{default:t(()=>[e(I,{disabled:_(i).goods_id,onClick:u[0]||(u[0]=a=>_(d).visible=!0),type:"primary",plain:""},{default:t(()=>[be]),_:1},8,["disabled"])]),_:1}),n.value.goods_id?(f(),H(p,{key:0,label:" ","label-width":100},{default:t(()=>[l("div",ge,[l("p",null,[l("img",{src:n.value.default_image,width:"60",height:"60"},null,8,he)]),l("p",ve,V(n.value.goods_name),1)])]),_:1})):S("",!0),e(p,{label:" ","label-width":100,style:{"margin-right":"0"}},{default:t(()=>[l("p",we,[e(W,{size:14,class:"mr5"},{default:t(()=>[e(O)]),_:1}),ye]),e(z,{data:_(v).list,border:!0,stripe:!0},{default:t(()=>[e(w,{label:n.value.spec_qty>0?n.value.spec_name_1+" "+n.value.spec_name_2||"":"\u89C4\u683C"},{default:t(a=>[l("text",null,V(n.value.spec_qty>0?a.row.specification:"\u9ED8\u8BA4\u89C4\u683C"),1)]),_:1},8,["label"]),e(w,{prop:"stock",label:"\u5E93\u5B58",width:"200"}),e(w,{label:"\u4EF7\u683C",width:"200"},{default:t(a=>[r(V(a.row.price),1)]),_:1})]),_:1},8,["data"])]),_:1}),e(p,{label:"\u4EF7\u683C\u7B56\u7565","label-width":100,style:{"margin-right":"0"}},{default:t(()=>[l("div",ke,[(f(!0),h(R,null,K(_(i).rules,(a,y)=>(f(),h("div",{key:y,class:"mb10"},[l("p",null,[Ve,e(U,{modelValue:a.quantity,"onUpdate:modelValue":g=>a.quantity=g,"controls-position":"right",step:1,min:2,max:100},null,8,["modelValue","onUpdate:modelValue"]),xe,e(U,{modelValue:a.price,"onUpdate:modelValue":g=>a.price=g,"controls-position":"right",step:1,min:.01,max:n.value.price},null,8,["modelValue","onUpdate:modelValue","min","max"]),Ce,y>0?(f(),h("span",{key:0,onClick:g=>F(y),class:"f-gray ml10 f-13 pointer"},"\u5220\u9664",8,qe)):S("",!0)])]))),128)),l("div",null,[l("span",{onClick:E,class:"f-blue f-13 pointer"},"+\u65B0\u589E")])])]),_:1}),e(p,{label:"\u542F\u7528","label-width":100},{default:t(()=>[e(D,{modelValue:_(i).status,"onUpdate:modelValue":u[1]||(u[1]=a=>_(i).status=a),onChange:j,"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(p,{label:" ","label-width":100,class:"mt10"},{default:t(()=>[e(I,{type:"primary",onClick:$,loading:C.value},{default:t(()=>[Ie]),_:1},8,["loading"])]),_:1})]),_:1})])]),_:1})]),_:1})]),e(ae,{title:"\u9009\u62E9\u5546\u54C1",visible:_(d).visible,onClose:L,selected:_(d).selected,limit:1},null,8,["visible","selected"]),e(ne)],64)}}};var Me=ee(Ue,[["__scopeId","data-v-40f76c70"]]);export{Me as default};
