import{r as C,x as W,b as X,z as K,d as i,o as n,g as p,h as l,a as e,j as o,c as h,l as Z,F as R,i as s,E as de,u as re,e as ie,f as V,k as y,t as c,w as ue,B as Q,H as I}from"./index.d1aa649c.js";import{j as _e,o as ce,s as pe,k as me}from"./order.d895e13e.js";import{g as fe,a as ge,b as be,c as ye,d as ve,e as he}from"./moment.ab47a251.js";import{m as we}from"./seller.8a6b935d.js";import{_ as ke}from"./user.c52898fc.js";import{m as Ve}from"./seller.2d50dc72.js";import{c as Ce}from"./delivery.793b2c5d.js";import{w as xe}from"./chat.bafb08cb.js";import{a as ee}from"./blocks.605b2b55.js";import{c as ze}from"./canceled.bbf14af6.js";const Ue=s("\u5173\u95ED"),De=s("\u63D0\u4EA4"),$e={props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},data:{type:[Object,Array],default:()=>({})}},emits:["close"],setup(N,{emit:L}){const m=N,w=C(!1),d=C(!1),u=W({code:"noneed"}),D=C([]);X(()=>{Ce(null,_=>{D.value=_.list}),$(m.data)}),K(()=>m.visible,_=>{w.value=_}),K(()=>m.data,_=>{$(_)});const $=_=>{_.gtype=="material"?_e({order_id:_.order_id},f=>{u.code=f.code||"",u.number=f.number||""}):u.code="noneed"},U=()=>{ce({order_id:m.data.order_id,code:u.code,number:u.number,status:30},_=>{u.code=="noneed"&&xe(Object.assign(u,{toid:m.data.buyer_id,store_id:parseInt(m.data.seller_id)})),de.success(m.data.status==_.status?"\u7269\u6D41\u4FE1\u606F\u5DF2\u4FEE\u6539":"\u53D1\u8D27\u6210\u529F"),L("close",_)},d)},O=()=>{L("close",null)};return(_,f)=>{const P=i("el-option"),j=i("el-select"),S=i("el-form-item"),B=i("el-input"),F=i("el-form"),z=i("el-button"),r=i("el-dialog");return n(),p(r,{modelValue:w.value,"onUpdate:modelValue":f[3]||(f[3]=a=>w.value=a),title:N.title,width:500,center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":O},{footer:l(()=>[e(z,{onClick:O},{default:l(()=>[Ue]),_:1}),e(z,{type:"primary",onClick:U,loading:d.value},{default:l(()=>[De]),_:1},8,["loading"])]),default:l(()=>[e(F,null,{default:l(()=>[e(S,{label:"\u7269\u6D41\u516C\u53F8"},{default:l(()=>[e(j,{modelValue:o(u).code,"onUpdate:modelValue":f[0]||(f[0]=a=>o(u).code=a),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[(n(!0),h(R,null,Z(D.value,(a,g)=>(n(),p(P,{key:g,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u).code=="noneed"?(n(),p(S,{key:0,label:"\u53D1\u8D27\u8BF4\u660E"},{default:l(()=>[e(B,{modelValue:o(u).content,"onUpdate:modelValue":f[1]||(f[1]=a=>o(u).content=a),type:"textarea",resize:"none",placeholder:"\u5982\u865A\u62DF\u5546\u54C1\u63D0\u4F9B\u7684\u670D\u52A1"},null,8,["modelValue"])]),_:1})):(n(),p(S,{key:1,label:"\u7269\u6D41\u5355\u53F7"},{default:l(()=>[e(B,{modelValue:o(u).number,"onUpdate:modelValue":f[2]||(f[2]=a=>o(u).number=a),clearable:!0},null,8,["modelValue"])]),_:1}))]),_:1})]),_:1},8,["modelValue","title"])}}};var Se=ee($e,[["__scopeId","data-v-4183b405"]]);const Ye={class:"main w pt10"},Ee={class:"round-edge pd10 bgf"},Le={class:"pd10"},Me=s("\u8BA2\u5355"),Oe=s("\u8BA2\u5355\u7BA1\u7406"),je={class:"round-edge pd10 bgf mt20"},Be={class:"pl10 pt10"},qe=s("\u5168\u90E8"),Ie=s("\u4ECA\u5929"),Ne=s("\u6628\u5929"),Pe=s("\u6700\u8FD17\u5929"),Fe=s("\u6700\u8FD130\u5929"),Re=s("\u672C\u6708"),Te=s("\u672C\u5E74"),Ae={class:"block"},He=s("\u67E5\u8BE2"),Ge={class:"round-edge pd10 bgf mt20"},Je=["src"],Ke=s("\u865A\u62DF\u5546\u54C1"),Qe=s("\u670D\u52A1\u5546\u54C1"),We={key:0,class:"f-gray f-12"},Xe={class:"mt5"},Ze={class:"f-yahei"},et={key:0,class:"f-12"},tt={class:"bold"},lt={key:0,class:"f-gray"},at={key:1,class:"f-red"},ot={key:2,class:"f-blue"},st={key:3},nt={key:0},dt=s("\u9000\u6B3E\u6210\u529F"),rt=s(" \u9000\u6B3E\u4E2D"),it=s("\u67E5\u770B\u8BA2\u5355"),ut=s("\u53D6\u6D88\u8BA2\u5355"),_t={key:1},ct=s(" \u5546\u5BB6\u53D1\u8D27 "),pt=s(" \u865A\u62DF\u53D1\u8D27 "),mt=s(" \u4FEE\u6539\u5355\u53F7 "),ft=s("\u67E5\u770B\u7269\u6D41"),gt={key:0,class:"mt20 mb20"},bt={setup(N){const L=C(!1),m=C([]),w=C({}),d=W({queryitem:!0}),u=C({}),D=C(!1),$=C(!1),U=C(0),O=re();X(()=>{z(O.query),pe(null,r=>{u.value=r})});const _=()=>{z()},f=r=>{D.value=!0,U.value=r},P=r=>{$.value=!0,U.value=r},j=r=>{D.value=!1,$.value=!1,Object.assign(m.value[U.value],r||{})},S=(r,a)=>{let g={starttime:"",endtime:""};a=="datetype"?(r=="today"?g=fe():r=="yesterday"?g=ge():r=="month"?g=be():r=="year"?g=ye():r=="last7"?g=ve():r=="last30"&&(g=he()),d.daterange="",d.begin=g.starttime,d.end=g.endtime):a=="daterange"&&(d.datetype="",d.begin=r?r[0]+" 00:00:00":"",d.end=r?r[1]+" 23:59:59":""),z()},B=r=>{z({page_size:r})},F=r=>{z({page:r,page_size:w.value.page_size})};function z(r){me(Object.assign(d,r),a=>{m.value=a.list,w.value=a.pagination},L)}return(r,a)=>{const g=i("el-col"),T=i("el-breadcrumb-item"),te=i("el-breadcrumb"),b=i("el-radio-button"),A=i("el-radio-group"),x=i("el-form-item"),le=i("el-date-picker"),Y=i("el-option"),H=i("el-select"),q=i("el-input"),M=i("el-button"),ae=i("el-form"),k=i("el-table-column"),E=i("router-link"),G=i("el-tag"),J=i("el-row"),oe=i("el-table"),se=i("el-pagination"),ne=ie("loading");return n(),h(R,null,[e(we),V("div",Ye,[e(J,{gutter:12},{default:l(()=>[e(g,{span:4},{default:l(()=>[e(Ve)]),_:1}),e(g,{span:20},{default:l(()=>[V("div",Ee,[V("div",Le,[e(te,{separator:"/"},{default:l(()=>[e(T,null,{default:l(()=>[Me]),_:1}),e(T,null,{default:l(()=>[Oe]),_:1})]),_:1})])]),V("div",je,[V("div",Be,[e(ae,{inline:!0},{default:l(()=>[e(x,{label:"\u8BA2\u5355\u72B6\u6001"},{default:l(()=>[e(A,{modelValue:o(d).type,"onUpdate:modelValue":a[0]||(a[0]=t=>o(d).type=t),onChange:_},{default:l(()=>[e(b,{label:""},{default:l(()=>[s("\u5168\u90E8("+c(u.value.all||0)+")",1)]),_:1}),e(b,{label:"pending"},{default:l(()=>[s("\u5F85\u4ED8\u6B3E("+c(u.value.pending||0)+")",1)]),_:1}),e(b,{label:"teaming"},{default:l(()=>[s("\u5F85\u6210\u56E2("+c(u.value.teaming||0)+")",1)]),_:1}),e(b,{label:"accepted"},{default:l(()=>[s("\u5F85\u53D1\u8D27("+c(u.value.accepted||0)+") ",1)]),_:1}),e(b,{label:"shipped"},{default:l(()=>[s("\u5F85\u6536\u8D27("+c(u.value.shipped||0)+") ",1)]),_:1}),e(b,{label:"finished"},{default:l(()=>[s("\u4EA4\u6613\u5B8C\u6210("+c(u.value.finished||0)+") ",1)]),_:1}),e(b,{label:"canceled"},{default:l(()=>[s("\u4EA4\u6613\u5173\u95ED("+c(u.value.canceled||0)+") ",1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(x,{label:"\u4E0B\u5355\u65F6\u95F4"},{default:l(()=>[e(A,{modelValue:o(d).datetype,"onUpdate:modelValue":a[1]||(a[1]=t=>o(d).datetype=t),onChange:a[2]||(a[2]=t=>S(t,"datetype"))},{default:l(()=>[e(b,{label:""},{default:l(()=>[qe]),_:1}),e(b,{label:"today"},{default:l(()=>[Ie]),_:1}),e(b,{label:"yesterday"},{default:l(()=>[Ne]),_:1}),e(b,{label:"last7"},{default:l(()=>[Pe]),_:1}),e(b,{label:"last30"},{default:l(()=>[Fe]),_:1}),e(b,{label:"month"},{default:l(()=>[Re]),_:1}),e(b,{label:"year"},{default:l(()=>[Te]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:o(d).daterange,"onUpdate:modelValue":a[3]||(a[3]=t=>o(d).daterange=t),type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB","end-placeholder":"\u7ED3\u675F",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:a[4]||(a[4]=t=>S(t,"daterange")),class:"ml10"},null,8,["modelValue"])]),_:1}),e(x,{label:"\u8BA2\u5355\u7C7B\u578B"},{default:l(()=>[e(H,{modelValue:o(d).otype,"onUpdate:modelValue":a[5]||(a[5]=t=>o(d).otype=t),onChange:_,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(Y,{label:"\u666E\u901A\u8BA2\u5355",value:"normal"}),e(Y,{label:"\u62FC\u56E2\u8BA2\u5355",value:"teambuy"}),e(Y,{label:"\u81EA\u63D0\u8BA2\u5355",value:"guidebuy"})]),_:1},8,["modelValue"])]),_:1}),e(x,{label:"\u8BA2\u5355\u7F16\u53F7",style:{width:"243px"}},{default:l(()=>[e(q,{modelValue:o(d).order_sn,"onUpdate:modelValue":a[6]||(a[6]=t=>o(d).order_sn=t),clearable:""},null,8,["modelValue"])]),_:1}),e(x,{label:"\u6536\u8D27\u4EBA\u4FE1\u606F",style:{width:"330px"}},{default:l(()=>[e(q,{modelValue:o(d).consignee,"onUpdate:modelValue":a[7]||(a[7]=t=>o(d).consignee=t),placeholder:"\u59D3\u540D/\u624B\u673A\u53F7",clearable:""},null,8,["modelValue"])]),_:1}),V("div",Ae,[e(x,{label:"\u5546\u54C1\u7C7B\u578B"},{default:l(()=>[e(H,{modelValue:o(d).gtype,"onUpdate:modelValue":a[8]||(a[8]=t=>o(d).gtype=t),onChange:_,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(Y,{label:"\u5B9E\u7269\u5546\u54C1",value:"material"}),e(Y,{label:"\u670D\u52A1\u5546\u54C1",value:"service"}),e(Y,{label:"\u865A\u62DF\u5546\u54C1",value:"virtual"})]),_:1},8,["modelValue"])]),_:1}),e(x,{label:"\u5546\u54C1\u540D\u79F0",style:{width:"243px"}},{default:l(()=>[e(q,{modelValue:o(d).keyword,"onUpdate:modelValue":a[9]||(a[9]=t=>o(d).keyword=t),clearable:""},null,8,["modelValue"])]),_:1}),e(x,{label:"\u4E70\u5BB6\u7528\u6237\u540D"},{default:l(()=>[e(q,{modelValue:o(d).buyer_name,"onUpdate:modelValue":a[10]||(a[10]=t=>o(d).buyer_name=t),clearable:""},null,8,["modelValue"])]),_:1}),e(x,null,{default:l(()=>[e(M,{onClick:_,type:"primary",class:"f-13"},{default:l(()=>[He]),_:1})]),_:1})])]),_:1})])]),ue((n(),h("div",Ge,[e(oe,{data:m.value,border:!1,stripe:!1},{default:l(()=>[e(k,{type:"selection"}),e(k,{width:"420",label:"\u5546\u54C1\u4FE1\u606F"},{default:l(t=>[(n(!0),h(R,null,Z(t.row.items,v=>(n(),p(J,{class:"pr10 pb5",style:{"border-right":"1px #eee solid"},key:v.rec_id},{default:l(()=>[e(g,{span:4},{default:l(()=>[e(E,{to:"/goods/detail/"+v.goods_id,class:"rlink",style:{"margin-top":"4px"}},{default:l(()=>[V("img",{src:v.goods_image,width:"50",height:"50"},null,8,Je)]),_:2},1032,["to"])]),_:2},1024),e(g,{span:20,class:"l-h20"},{default:l(()=>[e(E,{to:"/goods/detail/"+v.goods_id,class:"line-clamp-2 rlink"},{default:l(()=>[t.row.gtype=="virtual"?(n(),p(G,{key:0,class:"f-12"},{default:l(()=>[Ke]),_:1})):t.row.gtype=="service"?(n(),p(G,{key:1,class:"f-12",type:"danger"},{default:l(()=>[Qe]),_:1})):y("",!0),s(" "+c(v.goods_name),1)]),_:2},1032,["to"]),v.specification?(n(),h("p",We,c(v.specification),1)):y("",!0),V("p",Xe,c(o(Q)(v.price))+" x "+c(v.quantity),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(k,{prop:"order_amount",label:"\u8BA2\u5355\u603B\u4EF7",width:"150",align:"center"},{default:l(t=>[V("strong",Ze,c(o(Q)(t.row[t.column.property])),1),t.row.gtype=="material"?(n(),h("p",et,"(\u542B\u8FD0\u8D39"+c(t.row.shipping_fee)+")",1)):y("",!0)]),_:1}),e(k,{prop:"buyer_name",label:"\u4E70\u5BB6",width:"150",sortable:""}),e(k,{prop:"status",label:"\u8BA2\u5355\u72B6\u6001",width:"150"},{default:l(t=>[V("p",tt,[t.row.status==0?(n(),h("span",lt,c(o(I)(t.row.status)),1)):t.row.status==20||t.row.status==11?(n(),h("span",at,c(o(I)(t.row.status)),1)):t.row.status==19?(n(),h("span",ot,c(o(I)(t.row.status)),1)):(n(),h("span",st,c(o(I)(t.row.status)),1))]),t.row.refund_id?(n(),h("p",nt,[t.row.refund_status=="SUCCESS"?(n(),p(E,{key:0,class:"rlink f-blue",to:"/seller/refund/detail/"+t.row.refund_id},{default:l(()=>[dt]),_:2},1032,["to"])):t.row.refund_status&&t.row.refund_status!="CLOSED"?(n(),p(E,{key:1,class:"rlink f-c60",to:"/seller/refund/detail/"+t.row.refund_id},{default:l(()=>[rt]),_:2},1032,["to"])):y("",!0)])):y("",!0)]),_:1}),e(k,{prop:"payment_name",label:"\u652F\u4ED8\u65B9\u5F0F",width:"150",sortable:""}),e(k,{prop:"order_sn",label:"\u8BA2\u5355\u7F16\u53F7",width:"110",sortable:""}),e(k,{prop:"add_time",label:"\u4E0B\u5355\u65F6\u95F4",width:"100",sortable:""}),e(k,{prop:"pay_time",label:"\u4ED8\u6B3E\u65F6\u95F4",width:"100",sortable:""}),e(k,{prop:"ship_time",label:"\u53D1\u8D27\u65F6\u95F4",width:"100",sortable:""}),e(k,{prop:"finished_time",label:"\u5B8C\u6210\u65F6\u95F4",width:"100",sortable:""}),e(k,{fixed:"right",label:"\u64CD\u4F5C",align:"center",width:"100"},{default:l(t=>[e(E,{class:"rlink f-blue mb5",to:"/seller/order/detail/"+t.row.order_id},{default:l(()=>[it]),_:2},1032,["to"]),t.row.pay_time||t.row.ship_time||t.row.finished_time?y("",!0):(n(),p(M,{key:0,class:"mb5",size:"small",onClick:v=>P(t.$index),plain:""},{default:l(()=>[ut]),_:2},1032,["onClick"])),t.row.gtype!="service"?(n(),h("div",_t,[t.row.status==20&&t.row.gtype=="material"?(n(),p(M,{key:0,class:"mb5",type:"warning",size:"small",onClick:v=>f(t.$index),plain:""},{default:l(()=>[ct]),_:2},1032,["onClick"])):y("",!0),t.row.status==20&&t.row.gtype=="virtual"?(n(),p(M,{key:1,class:"mb5",type:"warning",size:"small",onClick:v=>f(t.$index),plain:""},{default:l(()=>[pt]),_:2},1032,["onClick"])):y("",!0),t.row.status==30&&t.row.gtype=="material"?(n(),p(M,{key:2,class:"mb5",type:"warning",size:"small",onClick:v=>f(t.$index),plain:""},{default:l(()=>[mt]),_:2},1032,["onClick"])):y("",!0)])):y("",!0),t.row.ship_time&&t.row.gtype=="material"?(n(),p(E,{key:2,class:"rlink f-blue block",to:"/seller/order/logistic/"+t.row.order_id},{default:l(()=>[ft]),_:2},1032,["to"])):y("",!0)]),_:1})]),_:1},8,["data"]),w.value.total>0?(n(),h("div",gt,[e(se,{currentPage:w.value.page,"onUpdate:currentPage":a[11]||(a[11]=t=>w.value.page=t),"page-size":w.value.page_size,"onUpdate:page-size":a[12]||(a[12]=t=>w.value.page_size=t),"page-sizes":[10,50,100,200],background:!1,layout:"total, sizes, prev, pager, next",total:w.value.total,onSizeChange:B,onCurrentChange:F,"hide-on-single-page":!1,class:"center"},null,8,["currentPage","page-size","total"])])):y("",!0)])),[[ne,L.value]])]),_:1})]),_:1})]),m.value.length>0?(n(),p(Se,{key:0,title:"\u53D1\u8D27",visible:D.value,data:m.value[U.value],onClose:j},null,8,["visible","data"])):y("",!0),m.value.length>0?(n(),p(ze,{key:1,title:"\u53D6\u6D88\u8BA2\u5355",visible:$.value,data:m.value[U.value],onClose:j},null,8,["visible","data"])):y("",!0),e(ke)],64)}}};var Dt=ee(bt,[["__scopeId","data-v-5250563c"]]);export{Dt as default};
