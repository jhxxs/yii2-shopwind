import{E as V,r as y,z as j,d as i,o as k,g as N,h as l,f as x,a as e,i as h,u as G,x as R,b as H,e as J,c as F,j as S,F as K,m as Q,w as W,k as D,t as E,G as X}from"./index.63485ad7.js";import{r as U,a as Y}from"./blocks.ed01be35.js";import{m as Z}from"./my.9d94b932.js";import{_ as ee}from"./user.ca2642db.js";import{m as te}from"./my.0ca3ac1f.js";import{m as le}from"./multiselector.324534f4.js";import"./chat.2d6ea877.js";/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 * 
 * @Id address.js 2021.10.30 $
 * @author mosir
 */function ae(m,s,r){U("address/list",m,t=>{t.code==0&&typeof s=="function"&&s(t.data)},r)}function oe(m,s,r){U("address/add",m,t=>{t.code==0?typeof s=="function"&&s(t.data):V.warning(t.message)},r)}function se(m,s,r){U("address/update",m,t=>{t.code==0?typeof s=="function"&&s(t.data):V.warning(t.message)},r)}function ne(m,s,r){U("address/delete",m,t=>{t.code==0?typeof s=="function"&&s(t.data):V.warning(t.message)},r)}const ie={class:"mb20"},de=h("\u5173\u95ED"),ue=h("\u63D0\u4EA4"),re={props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},data:{type:[Object,Array],default:()=>({})}},emits:["close"],setup(m,{emit:s}){const r=m,t=y(!1),_=y(!1),a=y({});j(()=>r.visible,d=>{t.value=d}),j(()=>r.data,d=>{a.value=Object.assign(d,{defaddr:parseInt(d.defaddr)})});const p=()=>{a.value.addr_id?se(a.value,d=>{V.success("\u7F16\u8F91\u6210\u529F"),s("close",d,"update")},_):oe(a.value,d=>{V.success("\u6DFB\u52A0\u6210\u529F"),s("close",d)},_)},z=()=>{s("close",null)},$=d=>{a.value.region_id=d.id,d.label.forEach((n,g)=>{a.value[g==0?"province":g==1?"city":g==2?"district":"town"]=n})};return(d,n)=>{const g=i("el-input"),v=i("el-form-item"),C=i("el-switch"),o=i("el-form"),c=i("el-button"),w=i("el-dialog");return k(),N(w,{modelValue:t.value,"onUpdate:modelValue":n[5]||(n[5]=u=>t.value=u),title:m.title,width:600,center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":z},{footer:l(()=>[x("div",ie,[e(c,{onClick:z},{default:l(()=>[de]),_:1}),e(c,{type:"primary",onClick:p,loading:_.value},{default:l(()=>[ue]),_:1},8,["loading"])])]),default:l(()=>[e(o,{inline:!0},{default:l(()=>[e(v,{label:"\u6536\u8D27\u4EBA\u59D3\u540D","label-width":85},{default:l(()=>[e(g,{modelValue:a.value.consignee,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value.consignee=u)},null,8,["modelValue"])]),_:1}),e(v,{label:"\u6240\u5728\u5730\u533A","label-width":85,class:"uni-flex uni-row",style:{width:"100%"}},{default:l(()=>[e(le,{api:"region/list",idField:"region_id",nameField:"name",parentField:"parent_id",original:[a.value.province,a.value.city,a.value.district],onCallback:$},null,8,["original"])]),_:1}),e(v,{label:"\u8BE6\u7EC6\u5730\u5740","label-width":85},{default:l(()=>[e(g,{modelValue:a.value.address,"onUpdate:modelValue":n[1]||(n[1]=u=>a.value.address=u)},null,8,["modelValue"])]),_:1}),e(v,{label:"\u624B\u673A\u53F7\u7801","label-width":85},{default:l(()=>[e(g,{modelValue:a.value.phone_mob,"onUpdate:modelValue":n[2]||(n[2]=u=>a.value.phone_mob=u)},null,8,["modelValue"])]),_:1}),e(v,{label:"\u56FA\u8BDD\u53F7\u7801","label-width":85},{default:l(()=>[e(g,{modelValue:a.value.phone_tel,"onUpdate:modelValue":n[3]||(n[3]=u=>a.value.phone_tel=u)},null,8,["modelValue"])]),_:1}),e(v,{label:"\u8BBE\u4E3A\u9ED8\u8BA4","label-width":85,style:{width:"100%"}},{default:l(()=>[e(C,{modelValue:a.value.defaddr,"onUpdate:modelValue":n[4]||(n[4]=u=>a.value.defaddr=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}};var ce=Y(re,[["__scopeId","data-v-d30bbd2a"]]);const _e={class:"main w pt10"},pe={class:"round-edge pd10 bgf"},fe={class:"pd10"},me=h("\u7269\u6D41"),ge=h("\u6536\u8D27\u5730\u5740"),ve={class:"round-edge pd10 bgf mt20"},be={class:"mb10"},he=h("\u6DFB\u52A0\u65B0\u5730\u5740"),we=h("\u7F16\u8F91 "),ye=h("\u5220\u9664 "),Ve={key:0,class:"mt20 mb20"},Fe={setup(m){const s=G(),r=y(!1),t=y([]),_=y({}),a=y(0),p=R({visible:!1});H(()=>{C()});const z=()=>{p.title="\u6DFB\u52A0\u6536\u8D27\u5730\u5740",p.visible=!0,p.data={}},$=o=>{p.title="\u7F16\u8F91\u6536\u8D27\u5730\u5740",p.visible=!0,p.data=t.value[o],a.value=o},d=o=>{X.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6761\u8BB0\u5F55\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{ne(t.value[o],c=>{V.success("\u5220\u9664\u6210\u529F\uFF01"),t.value.splice(o,1)})}).catch(()=>{})},n=(o,c)=>{var w;p.visible=!1,o&&o.consignee&&(c=="update"?Object.assign((w=t.value[a.value])!=null?w:{},o):t.value.unshift(o),s.query.redirect&&Q(s.query.redirect))},g=o=>{C({page_size:o})},v=o=>{C({page:o,page_size:_.value.page_size})};function C(o){ae(o,c=>{t.value=c.list,_.value=c.pagination},r)}return(o,c)=>{const w=i("el-col"),u=i("el-breadcrumb-item"),q=i("el-breadcrumb"),B=i("el-button"),b=i("el-table-column"),I=i("SuccessFilled"),M=i("el-icon"),O=i("el-table"),P=i("el-pagination"),A=i("el-row"),L=J("loading");return k(),F(K,null,[e(Z),x("div",_e,[e(A,{gutter:12},{default:l(()=>[e(w,{span:4},{default:l(()=>[e(te)]),_:1}),e(w,{span:20},{default:l(()=>[x("div",pe,[x("div",fe,[e(q,{separator:"/"},{default:l(()=>[e(u,null,{default:l(()=>[me]),_:1}),e(u,null,{default:l(()=>[ge]),_:1})]),_:1})])]),W((k(),F("div",ve,[x("div",be,[e(B,{type:"primary",onClick:z},{default:l(()=>[he]),_:1})]),e(O,{data:t.value,border:!1,stripe:!1,class:"f-13"},{default:l(()=>[e(b,{type:"selection"}),e(b,{width:"60",label:"\u9ED8\u8BA4"},{default:l(f=>[f.row.defaddr==1?(k(),N(M,{key:0,class:"f-green f-14"},{default:l(()=>[e(I)]),_:1})):D("",!0)]),_:1}),e(b,{prop:"consignee",width:"100",label:"\u6536\u8D27\u4EBA\u59D3\u540D"}),e(b,{label:"\u6240\u5728\u5730\u533A",width:"250"},{default:l(f=>[h(E(f.row.province)+E(f.row.city)+E(f.row.district||""),1)]),_:1}),e(b,{prop:"address",label:"\u8BE6\u7EC6\u5730\u5740",width:"240"}),e(b,{prop:"phone_mob",label:"\u624B\u673A\u53F7",width:"150",sortable:""}),e(b,{prop:"phone_tel",label:"\u56FA\u5B9A\u7535\u8BDD",width:"150",sortable:""}),e(b,{fixed:"right",label:"\u64CD\u4F5C",width:"120",align:"center"},{default:l(f=>[e(B,{class:"f-13 mr5",type:"text",onClick:T=>$(f.$index)},{default:l(()=>[we]),_:2},1032,["onClick"]),e(B,{class:"f-13",type:"text",onClick:T=>d(f.$index)},{default:l(()=>[ye]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),_.value.total>0?(k(),F("div",Ve,[e(P,{currentPage:_.value.page,"onUpdate:currentPage":c[0]||(c[0]=f=>_.value.page=f),"page-size":_.value.page_size,"onUpdate:page-size":c[1]||(c[1]=f=>_.value.page_size=f),"page-sizes":[10,50,100,200],background:!1,layout:"total, sizes, prev, pager, next",total:_.value.total,onSizeChange:g,onCurrentChange:v,"hide-on-single-page":!1,class:"center"},null,8,["currentPage","page-size","total"])])):D("",!0)])),[[L,r.value]])]),_:1})]),_:1})]),e(ce,{title:S(p).title,visible:S(p).visible,data:S(p).data,onClose:n},null,8,["title","visible","data"]),e(ee)],64)}}};export{Fe as default};
