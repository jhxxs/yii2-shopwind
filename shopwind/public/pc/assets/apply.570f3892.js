import{r as k,b as P,d as u,o as d,c as b,a,f as i,t as x,k as w,h as s,F as $,g as r,l as T,J as N,q as j,v as H,i as _,m as C,E as K}from"./index.a58ce339.js";import{d as Q,s as W,e as X,f as Y}from"./store.4297e69f.js";import{a as Z,s as ee}from"./blocks.ba26e4d1.js";import{u as le}from"./upload.15d7fb1f.js";import{m as E}from"./multiselector.a9edc986.js";import{m as ae}from"./my.47bbd71a.js";import{_ as te}from"./user.fc5752a9.js";import"./chat.ded1e0ec.js";const c=V=>(j("data-v-86331a96"),V=V(),H(),V),se={class:"main w pt10"},oe={class:"round-edge pd10 bgf"},ie=c(()=>i("h3",{class:"center mt20"},"\u5546\u5BB6\u5165\u9A7B\u7533\u8BF7",-1)),ne={class:"apply"},de={key:0,class:"center pd10 mb20 remark l-h17"},ue=_("\u4E2A\u4EBA"),re=_("\u4F01\u4E1A"),_e=c(()=>i("p",{class:"f-gray f-12 ml20"},"\u6CE8\uFF1A\u4E3B\u4F53\u7C7B\u578B\u8BBE\u7F6E\u540E\u65E0\u6CD5\u66F4\u6539",-1)),ce={class:"ml20 mt10 f-gray f-13",style:{width:"calc(100% - 20px)"}},me={class:"mr20"},pe={class:"mr20"},fe=c(()=>i("p",{class:"ml20"},null,-1)),ve={key:0},ye=["src"],be=c(()=>i("p",{class:"f-gray f-13 ml10 l-h17"},"\u8BF7\u4E0A\u4F20\u4F01\u4E1A\u8425\u4E1A\u6267\u7167\u626B\u63CF\u4EF6",-1)),ge={key:0},he=["src"],ke=c(()=>i("p",{class:"f-gray f-13 ml10 l-h17"},[_("\u8BF7\u4E0A\u4F20\u672C\u4EBA\uFF08\u6CD5\u4EBA\uFF09"),i("br"),_("\u7684\u8EAB\u4EFD\u8BC1\u4EF6\uFF08\u6B63\u9762\uFF09")],-1)),we={key:0},Ve=["src"],xe=c(()=>i("p",{class:"f-gray f-13 ml10 l-h17"},[_("\u8BF7\u4E0A\u4F20\u672C\u4EBA\uFF08\u6CD5\u4EBA\uFF09"),i("br"),_("\u7684\u8EAB\u4EFD\u8BC1\u4EF6\uFF08\u53CD\u9762\uFF09")],-1)),Ce=c(()=>i("p",{class:"ml20"},null,-1)),Ue=_(" \u63D0\u4EA4\u5BA1\u6838 "),Fe={setup(V){const z=k(!1),g=k({}),m=k([]),p=k({}),l=k({stype:"personal"});P(()=>{Q(null,o=>{m.value=o.list||[],o.list.length>0&&(p.value=o.list[0],l.value.sgrade=p.value.grade_id)}),g.value=JSON.parse(localStorage.getItem("visitor")),J({store_id:g.value.userid})});const A=()=>{X(l.value,o=>{K.success(o.state==1?"\u60A8\u7684\u5E97\u94FA\u5DF2\u5F00\u901A":"\u60A8\u7684\u5F00\u5E97\u7533\u8BF7\u5DF2\u63D0\u4EA4\uFF0C\u5F85\u5E73\u53F0\u5BA1\u6838\u540E\u5F00\u901A\uFF01"),J(o)},z)},B=(o,e)=>{l.value[e]=o.id},U=(o,e)=>{le(o.raw,{store_id:g.value.userid,folder:"identity/"},f=>{l.value[e]=f.fileUrl})},F=o=>{l.value[o]=""},L=o=>{for(let e=0;e<m.value.length;e++)m.value[e].grade_id==o&&(p.value=m.value[e])},O=()=>{ee(null,o=>{(!o||!o.store_allow)&&C("/message/result","warn","\u5546\u5BB6\u5165\u9A7B","\u6682\u4E0D\u5F00\u653E\u5546\u5BB6\u5165\u9A7B")})};function J(o){W(o,e=>{e?e.state==0?C("/message/result","clock","\u5E97\u94FA\u5BA1\u6838\u4E2D",e.apply_remark):e.state==1?(g.value.store_id=e.store_id,localStorage.setItem("visitor",JSON.stringify(g.value)),C("/message/result?redirect=/seller/index","success","\u5E97\u94FA\u5DF2\u5F00\u901A","\u606D\u559C\uFF01\u60A8\u7684\u5E97\u94FA\u5DF2\u5F00\u901A\uFF0C\u60A8\u53EF\u4EE5\u53D1\u5E03\u5546\u54C1\u53CA\u552E\u5356\u4E86")):e.state==2?C("/message/result","fail","\u5E97\u94FA\u5DF2\u88AB\u5173\u95ED",e.close_reason):e.state==3&&(l.value=e,Y(null,f=>{let h=["owner","identity_card","identity_front","identity_back","business_license"];for(let n in h)l.value[h[n]]=f[h[n]]})):O()})}return(o,e)=>{const f=u("el-radio"),h=u("el-radio-group"),n=u("el-form-item"),R=u("el-option"),q=u("el-select"),v=u("el-input"),S=u("close-bold"),y=u("el-icon"),M=u("plus"),I=u("el-upload"),D=u("el-button"),G=u("el-form");return d(),b($,null,[a(ae),i("div",se,[i("div",oe,[ie,i("div",ne,[l.value.apply_remark&&l.value.state==3?(d(),b("div",de," \u60A8\u7684\u5E97\u94FA\u672A\u901A\u8FC7\u5BA1\u6838\uFF0C"+x(l.value.apply_remark),1)):w("",!0),a(G,null,{default:s(()=>[a(n,{label:"\u4E3B\u4F53\uFF1A","label-width":250},{default:s(()=>[a(h,{modelValue:l.value.stype,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.stype=t),class:"ml20"},{default:s(()=>[a(f,{label:"personal",disabled:l.value.store_id>0,size:"large",border:"",style:{padding:"0 60px"}},{default:s(()=>[ue]),_:1},8,["disabled"]),a(f,{label:"company",disabled:l.value.store_id>0,size:"large",border:"",style:{padding:"0 60px"}},{default:s(()=>[re]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(n,{label:" ","label-width":250},{default:s(()=>[_e]),_:1}),m.value.length>0?(d(),r(n,{key:0,label:"\u5E97\u94FA\u7B49\u7EA7\uFF1A","label-width":250},{default:s(()=>[a(q,{modelValue:l.value.sgrade,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.sgrade=t),onChange:L,class:"ml20"},{default:s(()=>[(d(!0),b($,null,T(m.value,t=>(d(),r(R,{label:t.grade_name,value:t.grade_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),i("p",ce,[i("span",me,"\u53D1\u5E03\u5546\u54C1\u6570\u9650\u5236\uFF1A"+x(p.value.goods_limit||"\u4E0D\u9650\u5236")+"\u4EF6",1),i("span",pe,"\u56FE\u7247\u7A7A\u95F4\u91CF\u9650\u5236\uFF1A"+x(p.value.space_limit)+"MB",1),i("span",null,x(p.value.description),1)])]),_:1})):w("",!0),a(n,{label:"\u6240\u5C5E\u5206\u7C7B\uFF1A","label-width":250},{default:s(()=>[fe,a(E,{api:"scategory/list",idField:"cate_id",nameField:"cate_name",parentField:"parent_id",original:l.value.category,onCallback:e[2]||(e[2]=t=>{B(t,"cate_id")})},null,8,["original"])]),_:1}),a(n,{label:"\u5E97\u94FA\u540D\u79F0\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.store_name,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.store_name=t),class:"ml20"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u4E3B\u4F53\u540D\u79F0\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.owner,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.owner=t),class:"ml20",placeholder:l.value.stype=="personal"?"\u7533\u8BF7\u8005\u59D3\u540D":"\u4F01\u4E8B\u4E1A\u5355\u4F4D\u540D\u79F0"},null,8,["modelValue","placeholder"])]),_:1}),l.value.stype=="personal"?(d(),r(n,{key:1,label:"\u8EAB\u4EFD\u8BC1\u53F7\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.identity_card,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.identity_card=t),class:"ml20"},null,8,["modelValue"])]),_:1})):w("",!0),l.value.stype=="company"?(d(),r(n,{key:2,label:"\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.identity_card,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.identity_card=t),class:"ml20"},null,8,["modelValue"])]),_:1})):w("",!0),l.value.stype=="company"?(d(),r(n,{key:3,label:"\u5DE5\u5546\u8425\u4E1A\u6267\u7167\uFF1A","label-width":250},{default:s(()=>[a(I,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{U(t,"business_license")},class:"ml20 relative"},{default:s(()=>[l.value.business_license?(d(),b("p",ve,[i("img",{src:l.value.business_license+"?t="+Math.random()},null,8,ye),a(y,{onClick:e[7]||(e[7]=N(t=>F("business_license"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(d(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),be]),_:1},8,["on-change"])]),_:1})):w("",!0),a(n,{label:"\u8EAB\u4EFD\u8BC1\u4EF6\uFF1A","label-width":250},{default:s(()=>[a(I,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{U(t,"identity_front")},class:"ml20 relative"},{default:s(()=>[l.value.identity_front?(d(),b("p",ge,[i("img",{src:l.value.identity_front+"?t="+Math.random()},null,8,he),a(y,{onClick:e[8]||(e[8]=N(t=>F("identity_front"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(d(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),ke]),_:1},8,["on-change"]),a(I,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{U(t,"identity_back")},class:"ml20 relative"},{default:s(()=>[l.value.identity_back?(d(),b("p",we,[i("img",{src:l.value.identity_back+"?t="+Math.random()},null,8,Ve),a(y,{onClick:e[9]||(e[9]=N(t=>F("identity_back"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(d(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),xe]),_:1},8,["on-change"])]),_:1}),a(n,{label:"\u8054\u7CFB\u7535\u8BDD\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.tel,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.tel=t),class:"ml20"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u6240\u5728\u5730\u533A\uFF1A","label-width":250},{default:s(()=>[Ce,a(E,{api:"region/list",idField:"region_id",nameField:"name",parentField:"parent_id",original:[l.value.province,l.value.city,l.value.district],onCallback:e[11]||(e[11]=t=>{B(t,"region_id")})},null,8,["original"])]),_:1}),a(n,{label:"\u8BE6\u7EC6\u5730\u5740\uFF1A","label-width":250},{default:s(()=>[a(v,{modelValue:l.value.address,"onUpdate:modelValue":e[12]||(e[12]=t=>l.value.address=t),class:"ml20"},null,8,["modelValue"])]),_:1}),a(n,{label:" ","label-width":250,class:"pt10"},{default:s(()=>[a(D,{onClick:A,type:"primary",class:"mt20 ml20",loading:z.value},{default:s(()=>[Ue]),_:1},8,["loading"])]),_:1})]),_:1})])])]),a(te)],64)}}};var Ee=Z(Fe,[["__scopeId","data-v-86331a96"]]);export{Ee as default};
