import{r as n,_ as u}from"./blocks.bc527001.js";import{D as f,E as s,m as r,d as c,o as d,c as g,a as i,F as l}from"./index.5aeb4455.js";import{c as m}from"./chat.7e9d6648.js";/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 * 
 * @Id user.js 2020.10.25 $
 * @author mosir
 */function h(t,o,a){n("user/read",t,e=>{e.code==0&&typeof o=="function"&&o(e.data)},a)}function w(t,o,a){n("user/update",t,e=>{e.code==0?typeof o=="function"&&o(e.data):s.warning(e.message)},a)}function v(t,o,a){t.verifycodekey=localStorage.getItem("smsverifycodekey"),n("user/password",t,e=>{e.code==0?typeof o=="function"&&o(e.data):s.warning(e.message)},a)}function S(t,o,a){t.verifycodekey=localStorage.getItem("smsverifycodekey"),n("user/phone",t,e=>{e.code==0?typeof o=="function"&&o(e.data):s.warning(e.message)},a)}function x(t,o,a){n("auth/login",t,e=>{if(e.code==0&&e.data)if(e.data.user_info){if(t.requiresSeller&&!e.data.user_info.store_id)return f({title:"\u63D0\u793A",message:"\u60A8\u8FD8\u4E0D\u662F\u5356\u5BB6",showCancelButton:!1,type:"warning"});localStorage.setItem("access_token",e.data.token),localStorage.setItem("visitor",JSON.stringify(e.data.user_info)),typeof o=="function"&&o(e.data)}else s.warning("\u767B\u5F55\u5931\u8D25");else f({title:"\u63D0\u793A",message:e.message?e.message:"\u672A\u77E5\u9519\u8BEF",showCancelButton:!1,type:"warning"})},a)}function B(t){localStorage.removeItem("access_token"),localStorage.removeItem("visitor"),typeof t=="function"?t():r("/user/login")}function E(t,o,a){n("auth/connect",t,e=>{e.code==0?typeof o=="function"&&o(e.data):f({title:"\u63D0\u793A",message:e.message?e.message:"\u672A\u77E5\u9519\u8BEF",showCancelButton:!1,type:"warning"})},a)}const I={props:{page:{type:String,default:""},exclude:{type:Array,default(){return[]}}},setup(t){return(o,a)=>{const e=c("el-backtop");return d(),g(l,null,[i(u,{page:t.page,footer:!0,exclude:t.exclude},null,8,["page","exclude"]),i(e,{right:10,bottom:100,"visibility-height":50}),i(m)],64)}}};export{I as _,h as a,w as b,S as c,v as d,x as e,E as f,B as u};
