import{r as C,x as H,z as L,b as K,d as r,o as m,g as I,h as o,f as d,a as e,c as w,l as q,F as N,n as M,i as b,t as T,k as F,j as Q,u as W,e as X,w as Y,S as Z,q as ee,v as le,K as te,m as oe}from"./index.537ec318.js";import{a as ae,b as se}from"./delivery.24b87516.js";import{r as O}from"./region.7d46d18a.js";import{a as G}from"./blocks.862945f8.js";import{m as ne}from"./seller.3e8be5be.js";import{_ as de}from"./user.ddecec95.js";import{m as ie}from"./seller.86076fd7.js";import"./chat.8226e6df.js";const re={class:"uni-flex uni-row gallery"},_e=["onClick"],ue={class:"mb20"},ce=b("\u5173\u95ED"),fe=b("\u63D0\u4EA4"),me={props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},data:{type:[Object,Array],default:()=>({})},original:{type:String,default:""}},emits:["close"],setup(V,{emit:S}){const k=V,c=C(!1),x=C(!1);H({original:[]});const _=H({list:[],all:{}});L(()=>k.visible,t=>{c.value=t}),L(()=>k.data,t=>{}),L(()=>k.original,t=>{}),K(()=>{O({parent_id:0,page_size:100},t=>{if(t.list.length>0){t.list[0].current=!0,_.list.push(t.list);let l=t.list[0];_.all[l.region_id]=l,O({parent_id:l.region_id,page_size:100},a=>{_.list.push(a.list),_.all[l.region_id].children=a.list})}})});const A=()=>{c.value=!1,S("close",n())},j=()=>{c.value=!1,S("close",null)},B=(t,l)=>{t>0?R(t):D(t,l)},R=t=>{let l=[];_.list[t].forEach(a=>{a.checked&&l.push(a)}),_.list[t-1].forEach(a=>{a.current&&(l.length==0?(a.checked=!1,a.indeterminate=!1):l.length==_.list[t].length?(a.checked=!0,a.indeterminate=!1):a.indeterminate=!0)})};function D(t,l,a){l.indeterminate=!1,_.list[t].forEach(f=>{f.current=f==l}),O({parent_id:l.region_id,page_size:100},f=>{l.children=f.list,_.all[l.region_id]=l,f.list.length>0&&(f.list.forEach(u=>{u.checked=!!l.checked}),typeof a=="function"?a(f.list):_.list[t+1]=f.list)})}function n(){let t=[[],[]];return Object.values(_.all).forEach(l=>{l.disabled||(l.checked&&!l.indeterminate?(t[0].push(l.region_name),t[1].push(parseInt(l.region_id))):l.indeterminate&&l.children.forEach(a=>{a.checked&&(t[0].push(a.region_name),t[1].push(parseInt(a.region_id)))}))}),t}return(t,l)=>{const a=r("el-checkbox"),f=r("ArrowRight"),u=r("el-icon"),y=r("el-scrollbar"),h=r("el-button"),U=r("el-dialog");return m(),I(U,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=$=>c.value=$),width:700,title:V.title,center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":j},{footer:o(()=>[d("div",ue,[e(h,{onClick:j},{default:o(()=>[ce]),_:1}),e(h,{type:"primary",onClick:A,loading:x.value},{default:o(()=>[fe]),_:1},8,["loading"])])]),default:o(()=>[d("div",re,[(m(!0),w(N,null,q(Q(_).list,($,E)=>(m(),I(y,{height:300,class:"list"},{default:o(()=>[(m(!0),w(N,null,q($,(p,P)=>(m(),w("div",{class:M(["uni-flex uni-row width-between  flex-middle pl10 pr10",p.current?"current":""])},[e(a,{onChange:z=>{B(E,p)},modelValue:p.checked,"onUpdate:modelValue":z=>p.checked=z,label:p.region_id,indeterminate:p.indeterminate,disabled:p.disabled},{default:o(()=>[b(T(p.region_name),1)]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","label","indeterminate","disabled"]),d("p",{onClick:z=>B(E,p),class:"width-surplus",style:{"text-align":"right"}},[E==0?(m(),I(u,{key:0},{default:o(()=>[e(f)]),_:1})):F("",!0)],8,_e)],2))),256))]),_:2},1024))),256))])]),_:1},8,["modelValue","title"])}}};var pe=G(me,[["__scopeId","data-v-98e797c0"]]);const v=V=>(ee("data-v-39339b39"),V=V(),le(),V),he={class:"main w pt10"},ge={class:"round-edge pd10 bgf"},be={class:"pd10"},ve=b("\u7269\u6D41"),Ve=b("\u8FD0\u8D39\u8BBE\u7F6E"),ke={class:"round-edge pd10 bgf mt20"},we=v(()=>d("span",{class:"f-gray f-13"},'\u9664\u6307\u5B9A\u5730\u533A\u5916\uFF0C\u5176\u4F59\u5730\u533A\u7684\u8FD0\u8D39\u91C7\u7528"\u9ED8\u8BA4\u8FD0\u8D39"',-1)),ye=v(()=>d("span",null,"\u9ED8\u8BA4\u8FD0\u8D39\uFF1A",-1)),Ce=v(()=>d("span",null,"\u4EF6\u5185\uFF0C",-1)),xe=v(()=>d("span",null,"\u5143\uFF0C",-1)),Ue=v(()=>d("span",null,"\u6BCF\u589E\u52A0",-1)),$e=v(()=>d("span",null,"\u4E2A\uFF0C",-1)),Ee=v(()=>d("span",null,"\u589E\u52A0\u8FD0\u8D39",-1)),ze=v(()=>d("span",null,"\u5143",-1)),Ie={key:0},Se=b("\u4FEE\u6539\u5730\u533A "),je=b("\u5220\u9664 "),Be={class:"f-blue f-13 flex-middle mt5"},Ne=["onClick"],Ae=b("\u63D0\u4EA4"),Re={setup(V){const S=W(),k=C(!1),c=C({name:"\u9ED8\u8BA4\u6A21\u677F",area_fee:{express:{default_fee:{}}}}),x=C(!1),_=C({});K(()=>{ae({id:S.params.id},n=>{n&&(c.value=Object.assign(n,{id:n.template_id}))})});const A=n=>{Z(n.other_fee)&&(n.other_fee=[]),n.other_fee.push({})},j=n=>{x.value=!0,_.value=n},B=(n,t)=>{n.other_fee.splice(t,1)},R=()=>{se(c.value,n=>{te({title:"\u63D0\u793A",message:"\u8FD0\u8D39\u6A21\u677F\u8BBE\u7F6E\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:()=>{oe("/seller/delivery/list")}})},k)},D=n=>{x.value=!1,n&&(_.value.dests=n[0].join(","),_.value.dest_ids=n[1].join("|"))};return(n,t)=>{const l=r("el-col"),a=r("el-breadcrumb-item"),f=r("el-breadcrumb"),u=r("el-input"),y=r("el-form-item"),h=r("el-table-column"),U=r("el-button"),$=r("el-table"),E=r("CirclePlus"),p=r("el-icon"),P=r("el-form"),z=r("el-row"),J=X("loading");return m(),w(N,null,[e(ne),d("div",he,[e(z,{gutter:12},{default:o(()=>[e(l,{span:4},{default:o(()=>[e(ie)]),_:1}),e(l,{span:20},{default:o(()=>[d("div",ge,[d("div",be,[e(f,{separator:"/"},{default:o(()=>[e(a,null,{default:o(()=>[ve]),_:1}),e(a,null,{default:o(()=>[Ve]),_:1})]),_:1})])]),d("div",ke,[e(P,{inline:!0,class:"pd10"},{default:o(()=>[e(y,{label:"\u6A21\u677F\u540D\u79F0","label-width":100},{default:o(()=>[e(u,{modelValue:c.value.name,"onUpdate:modelValue":t[0]||(t[0]=i=>c.value.name=i),clearable:""},null,8,["modelValue"])]),_:1}),e(y,{label:"\u8FD0\u8D39\u89C4\u5219","label-width":100},{default:o(()=>[we]),_:1}),c.value.name?(m(),I(y,{key:0,label:"\u914D\u9001\u65B9\u5F0F","label-width":100,style:{"margin-right":"0"}},{default:o(()=>[(m(!0),w(N,null,q(c.value.area_fee,i=>(m(),w("div",null,[d("p",null,T(i.name),1),d("div",{class:M(["uni-flex uni-row f-13 pd10 border",i.other_fee&&i.other_fee.length>0?"border-b0":""])},[ye,e(u,{modelValue:i.default_fee.start_standards,"onUpdate:modelValue":s=>i.default_fee.start_standards=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),Ce,e(u,{modelValue:i.default_fee.start_fees,"onUpdate:modelValue":s=>i.default_fee.start_fees=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),xe,Ue,e(u,{modelValue:i.default_fee.add_standards,"onUpdate:modelValue":s=>i.default_fee.add_standards=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),$e,Ee,e(u,{modelValue:i.default_fee.add_fees,"onUpdate:modelValue":s=>i.default_fee.add_fees=s,class:"small ml5 mr5"},null,8,["modelValue","onUpdate:modelValue"]),ze],2),i.other_fee&&i.other_fee.length>0?(m(),w("div",Ie,[Y((m(),I($,{data:i.other_fee,border:!0,stripe:!1,class:"f-13"},{default:o(()=>[e(h,{prop:"dests",label:"\u914D\u9001\u5730\u533A"}),e(h,{prop:"start_standards",label:"\u9996\u4EF6"},{default:o(s=>[e(u,{modelValue:s.row.start_standards,"onUpdate:modelValue":g=>s.row.start_standards=g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"start_fees",label:"\u9996\u8D39(\u5143)"},{default:o(s=>[e(u,{modelValue:s.row.start_fees,"onUpdate:modelValue":g=>s.row.start_fees=g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"add_standards",label:"\u7EED\u4EF6"},{default:o(s=>[e(u,{modelValue:s.row.add_standards,"onUpdate:modelValue":g=>s.row.add_standards=g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{prop:"add_fees",label:"\u7EED\u8D39(\u5143)"},{default:o(s=>[e(u,{modelValue:s.row.add_fees,"onUpdate:modelValue":g=>s.row.add_fees=g},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(h,{fixed:"right",label:"\u64CD\u4F5C",width:"160",align:"center"},{default:o(s=>[e(U,{type:"primary",size:"small",onClick:g=>j(s.row),plain:""},{default:o(()=>[Se]),_:2},1032,["onClick"]),e(U,{type:"warning",size:"small",onClick:g=>B(i,s.$index),plain:""},{default:o(()=>[je]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data"])),[[J,k.value]])])):F("",!0),d("div",Be,[e(p,{size:16},{default:o(()=>[e(E)]),_:1}),d("span",{onClick:s=>A(i),class:"ml5 pointer"},"\u6DFB\u52A0\u6307\u5B9A\u5730\u533A\u8FD0\u8D39",8,Ne)])]))),256))]),_:1})):F("",!0),e(y,{label:" ","label-width":100},{default:o(()=>[e(U,{type:"primary",onClick:R,loading:k.value},{default:o(()=>[Ae]),_:1},8,["loading"])]),_:1})]),_:1})])]),_:1})]),_:1})]),e(pe,{title:"\u9009\u62E9\u5730\u533A",visible:x.value,original:_.value.dest_ids,onClose:D},null,8,["visible","original"]),e(de)],64)}}};var Me=G(Re,[["__scopeId","data-v-39339b39"]]);export{Me as default};
