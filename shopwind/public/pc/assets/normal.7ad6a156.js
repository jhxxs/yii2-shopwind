import{_ as ae}from"./cart_empty.ba3c6efa.js";import{r as ie,x as E,b as ce,d as f,e as de,o as d,c as p,a as e,f as t,h as n,w as re,j as s,F as L,l as U,k as x,g as C,n as A,t as _,a0 as _e,i as v,B as y,q as pe,v as ue,D as fe,m as T,S as k}from"./index.5367eff4.js";import{p as me,q as he}from"./order.863cbb9b.js";import{_ as ge}from"./home.9b935403.js";import{_ as ye}from"./home.6f74a59e.js";import{a as ve}from"./blocks.266145c0.js";import"./chat.251db3e2.js";const m=F=>(pe("data-v-e4682a3e"),F=F(),ue(),F),be={class:"main bgf"},xe={class:"w",style:{"padding-top":"20px"}},we={style:{"min-height":"100px"}},ke={key:0},Ve={key:0,class:"addresses mt20"},Ie={class:"f-16 bold f-yahei mb10 flex-middle"},Le=m(()=>t("span",{class:"ml5"},"\u6536\u8D27\u5730\u5740",-1)),Ce={class:"uni-flex uni-row flex-wrap"},Oe=["onClick"],je={class:"f-13 f-c55 mt5"},Be=m(()=>t("p",null,"\u4F7F\u7528\u65B0\u5730\u5740",-1)),Ee={class:"cartbox mt20 f-13"},Ue={class:"hd mb20"},Fe=m(()=>t("span",{class:"ml20"},"\u5E97\u94FA\u5546\u54C1",-1)),Se=v("\u4EF7\u683C"),ze=v("\u6570\u91CF"),De=v("\u5C0F\u8BA1"),$e={class:"bd"},Ne={class:"list mb10"},Pe=m(()=>t("label",null,"\u5E97\u94FA\uFF1A",-1)),qe={class:"f-blue"},Me={class:"item"},Ae=["src"],Te={class:"desc mr10 pt5 pb5 f-14"},Ke=v("\u865A\u62DF\u5546\u54C1"),Ge=v("\u670D\u52A1\u5546\u54C1"),He={key:0,class:"f-gray f-12 mt5"},Je={class:"uni-flex uni-row pd10 flex-middle mt10"},Qe=m(()=>t("span",null,"\u4E70\u5BB6\u7559\u8A00\uFF1A",-1)),Re={key:0,class:"uni-flex uni-row flex-middle each"},We={class:"pt10 pb10"},Xe=m(()=>t("label",{class:"mr10 f-c55"},"\u914D\u9001\u65B9\u5F0F\uFF1A",-1)),Ye={class:"center pd10 f-red f-14"},Ze={key:1,class:"uni-flex uni-row flex-middle each"},et={class:"pt10 pb10"},tt=m(()=>t("label",{class:"mr10 f-c55"},"\u5546\u5BB6\u4F18\u60E0\uFF1A",-1)),st={class:"center f-red f-14"},lt={key:2,class:"uni-flex uni-row flex-middle each"},nt={class:"pt10 pb10"},ot=m(()=>t("label",{class:"mr10 f-c55"},"\u6EE1\u51CF\u4F18\u60E0\uFF1A",-1)),at={class:"center f-red f-14"},it={class:"uni-flex uni-row flex-middle each"},ct=m(()=>t("p",{class:"pt10 pb10"},[t("label",{class:"f-red"},"\u5E97\u94FA\u5408\u8BA1\uFF1A")],-1)),dt={class:"center f-red f-14"},rt={class:"pd10 ml10"},_t=m(()=>t("label",{class:"mr10"},"\u79EF\u5206\u62B5\u6263\uFF1A",-1)),pt={class:"pd10 f-red"},ut={class:"fd"},ft=m(()=>t("span",null,"\u8FD4\u56DE\u8D2D\u7269\u8F66",-1)),mt=m(()=>t("label",null,"\u603B\u4EF7\uFF1A",-1)),ht={class:"mr20 f-17 f-red"},gt=v("\u53BB\u7ED3\u7B97"),yt={key:0,class:"empty uni-flex uni-row flex-middle flex-center"},vt=m(()=>t("p",{class:"pd10"},[t("img",{src:ae,width:"83"})],-1)),bt={class:"ml20"},xt=m(()=>t("p",{class:"bold mb20"},"\u60A8\u672A\u9009\u62E9\u7ED3\u7B97\u5546\u54C1",-1)),wt=v("\u8FD4\u56DE\u8D2D\u7269\u8F66"),kt=m(()=>t("span",{class:"f-simsun"},">>",-1)),Vt={setup(F){const S=ie(!0),c=E({gtype:[]}),O=E({list:[]}),w=E({}),h=E({points:0,money:0,useIntegral:!1}),a=E({otype:"normal",addr_id:0,region_id:0,consignee:"",phone_mob:"",delivery_type:{},postscript:{},coupon_sn:{},exchange_integral:0,anonymous:{}});ce(()=>{me(a,l=>{if(Object.assign(c,l.list),Object.assign(w,l.shipping_methods||{}),O.list=l.my_address,K(),H(),N(),j(),c.gtype.length>1)return fe.alert("\u5B9E\u7269\u5546\u54C1\u548C\u865A\u62DF\u5546\u54C1\u56E0\u7ED3\u7B97\u5468\u671F\u4E0D\u540C\uFF0C\u4E0D\u652F\u6301\u4E00\u8D77\u7ED3\u7B97\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u7ED3\u7B97\u5546\u54C1","\u63D0\u793A",{confirmButtonText:"OK",callback:function(o,b){T("cart/index")}})},S)});function K(){if(k(O.list))return!1;let l=null;a.addr_id&&(l=O.list[a.addr_id]),k(l)&&(l=Object.values(O.list)[0]),Object.assign(a,k(l)?{}:{addr_id:l.addr_id,region_id:l.region_id,gtype:c.gtype[0]}),Q(a.region_id)}function G(l){a.addr_id=l.addr_id,a.region_id=l.region_id,j()}function N(){if(c.allow_integral==1){let l=c.integralExchange,o=l.maxPoints>l.userIntegral?l.userIntegral:l.maxPoints;h.points=o,h.money=l.rate*o,h.useIntegral=!0,a.exchange_integral=o}}function H(){c.storeIds.forEach(l=>{let o=c.orderList[l].coupon_list;k(o)||(a.coupon_sn[l]=o[0].coupon_sn)})}function J(l){N(),j()}function P(l){let o=c.orderList[l].coupon_list;for(let b in o)if(o[b].coupon_sn==a.coupon_sn[l])return parseFloat(o[b].money);return 0}function Q(l){for(let o in w)a.delivery_type[o]=Object.values(w[o][l])[0].type}function R(l){j()}function W(l){a.exchange_integral=l?parseFloat(h.points):0,j()}function j(){let l=0;if(c.storeIds.forEach(o=>{let b=a.delivery_type[o]||"express",z=k(w)||k(w[o])||!a.region_id?0:parseFloat(w[o][a.region_id][b].logistic_fees),D=k(c.orderList[o].fullprefer)?0:parseFloat(c.orderList[o].fullprefer.price),V=k(c.orderList[o].coupon_list)?0:P(o);c.orderList[o].paymoney=parseFloat(c.orderList[o].amount)+z-D-V,l+=c.orderList[o].paymoney}),a.exchange_integral>0){let o=l-h.money;o<0&&(h.money=l,a.exchange_integral=l/c.integralExchange.rate,o=0),l=o}c.paymoney=l}function X(){he(a,l=>{T("/trade/cashier/pay/"+l.bizIdentity.toLowerCase()+"/"+l.bizOrderId)})}return(l,o)=>{const b=f("el-step"),z=f("el-steps"),D=f("LocationInformation"),V=f("el-icon"),Y=f("Select"),Z=f("Plus"),B=f("router-link"),u=f("el-col"),I=f("el-row"),q=f("el-tag"),ee=f("el-input"),$=f("el-option"),M=f("el-select"),te=f("el-switch"),se=f("DArrowLeft"),le=f("el-button"),ne=de("loading");return d(),p(L,null,[e(ge,{exclude:["category"]}),t("div",be,[t("div",xe,[e(z,{active:1,"finish-status":"success","process-status":"process",simple:""},{default:n(()=>[e(b,{title:"\u9009\u62E9\u5546\u54C1\u7ED3\u7B97"}),e(b,{title:"\u786E\u8BA4\u8BA2\u5355\u4FE1\u606F"}),e(b,{title:"\u4ED8\u6B3E"}),e(b,{title:"\u786E\u8BA4\u6536\u8D27"}),e(b,{title:"\u8BC4\u4EF7"})]),_:1}),re((d(),p("div",we,[Object.values(s(c)).length>0?(d(),p("div",ke,[s(c).gtype.includes("material")?(d(),p("div",Ve,[t("div",Ie,[e(V,null,{default:n(()=>[e(D)]),_:1}),Le]),t("div",Ce,[(d(!0),p(L,null,U(s(O).list,r=>(d(),p("div",{onClick:g=>G(r),class:A(["item pointer pd10 mr10 mb10 relative",r.addr_id==s(a).addr_id?"selected":""])},[t("p",null,_(r.consignee)+" "+_(r.phone_mob||r.phone_tel),1),t("p",je,_(r.province)+" "+_(r.city||"")+" "+_(r.district||"")+" "+_(r.address),1),r.addr_id==s(a).addr_id?(d(),C(V,{key:0,class:"ico absolute"},{default:n(()=>[e(Y)]),_:1})):x("",!0)],10,Oe))),256)),e(B,{to:"/my/address/list?redirect="+s(_e)(),class:"item rlink pointer pd10 mr10 mb10 center"},{default:n(()=>[e(V,{size:20},{default:n(()=>[e(Z)]),_:1}),Be]),_:1},8,["to"])])])):x("",!0),t("div",Ee,[t("div",Ue,[e(I,null,{default:n(()=>[e(u,{span:12},{default:n(()=>[Fe]),_:1}),e(u,{span:4,class:"center"},{default:n(()=>[Se]),_:1}),e(u,{span:4,class:"center"},{default:n(()=>[ze]),_:1}),e(u,{span:4,class:"center"},{default:n(()=>[De]),_:1})]),_:1})]),t("div",$e,[(d(!0),p(L,null,U(s(c).orderList,(r,g)=>(d(),p("div",Ne,[e(I,{class:"pt10 pb10"},{default:n(()=>[e(u,{span:24,class:"uni-flex uni-row flex-middle"},{default:n(()=>[Pe,t("span",qe,_(r.store_name),1)]),_:2},1024)]),_:2},1024),(d(!0),p(L,null,U(r.items,i=>(d(),p("div",Me,[e(I,{class:"flex-middle"},{default:n(()=>[e(u,{span:12,class:"uni-flex uni-row flex-middle"},{default:n(()=>[e(B,{to:"/goods/detail/"+i.goods_id,class:"pic ml10 mr10 pt5 pb5"},{default:n(()=>[t("img",{width:"70",height:"70",src:i.goods_image},null,8,Ae)]),_:2},1032,["to"]),t("div",Te,[e(B,{to:"/goods/detail/"+i.goods_id,class:"rlink"},{default:n(()=>[i.gtype=="virtual"?(d(),C(q,{key:0,class:"f-12"},{default:n(()=>[Ke]),_:1})):i.gtype=="service"?(d(),C(q,{key:1,class:"f-12"},{default:n(()=>[Ge]),_:1})):x("",!0),v(" "+_(i.goods_name),1)]),_:2},1032,["to"]),i.specification?(d(),p("p",He,_(i.specification),1)):x("",!0)])]),_:2},1024),e(u,{span:4,class:"center f-red"},{default:n(()=>[v(_(s(y)(i.price)),1)]),_:2},1024),e(u,{span:4,class:"center"},{default:n(()=>[v(_(i.quantity),1)]),_:2},1024),e(u,{span:4,class:"center f-red f-14"},{default:n(()=>[v(_(s(y)(i.subtotal)),1)]),_:2},1024)]),_:2},1024)]))),256)),e(I,{class:"extra"},{default:n(()=>[e(u,{span:14},{default:n(()=>[t("div",Je,[Qe,e(ee,{modelValue:s(a).postscript[g],"onUpdate:modelValue":i=>s(a).postscript[g]=i,class:"postscript",placeholder:"\u5BF9\u5546\u54C1\u7684\u7279\u6B8A\u9700\u6C42\uFF0C\u5982\u989C\u8272\u3001\u5C3A\u7801\u7B49",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),e(u,{span:10,class:"cost pt10 pb10"},{default:n(()=>[s(a).otype!="guidebuy"&&s(w)[g]?(d(),p("div",Re,[t("p",We,[Xe,e(M,{modelValue:s(a).delivery_type[g],"onUpdate:modelValue":i=>s(a).delivery_type[g]=i,onChange:i=>R()},{default:n(()=>[(d(!0),p(L,null,U(s(w)[g][s(a).region_id],(i,oe,It)=>(d(),C($,{value:oe,label:i.name+" : "+s(y)(i.logistic_fees)},null,8,["value","label"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),t("p",Ye,"+ "+_(s(y)(s(w)[g][s(a).region_id][s(a).delivery_type[g]].logistic_fees)),1)])):x("",!0),r.allow_coupon==1&&r.coupon_list.length>0?(d(),p("div",Ze,[t("p",et,[tt,e(M,{modelValue:s(a).coupon_sn[g],"onUpdate:modelValue":i=>s(a).coupon_sn[g]=i,onChange:i=>J()},{default:n(()=>[e($,{value:"0",label:"\u4E0D\u4F7F\u7528\u4F18\u60E0\u5238"}),(d(!0),p(L,null,U(r.coupon_list,i=>(d(),C($,{value:i.coupon_sn,label:i.name+" : "+s(y)(i.money)},null,8,["value","label"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),t("p",st," -"+_(s(y)(P(g))),1)])):x("",!0),r.fullprefer.price>0?(d(),p("div",lt,[t("p",nt,[ot,t("span",null,"\u8D2D\u6EE1"+_(s(y)(r.fullprefer.amount))+"\u5143\uFF0C\u51CF"+_(s(y)(r.fullprefer.price))+"\u5143",1)]),t("p",at," -"+_(s(y)(r.fullprefer.price)),1)])):x("",!0),t("div",it,[ct,t("p",dt,_(s(y)(s(c).orderList[g].paymoney)),1)])]),_:2},1024)]),_:2},1024)]))),256)),s(c).allow_integral==1&&s(h).points>0?(d(),C(I,{key:0},{default:n(()=>[e(u,{span:14}),e(u,{span:6},{default:n(()=>[t("p",rt,[_t,t("span",{class:A([s(h).useIntegral?"":"f-gray"])},[e(te,{modelValue:s(h).useIntegral,"onUpdate:modelValue":o[0]||(o[0]=r=>s(h).useIntegral=r),onChange:W,class:"mr10"},null,8,["modelValue"]),v(" \u53EF\u4F7F\u7528"+_(s(h).points)+"\u79EF\u5206\u62B5\u6263 ",1)],2)])]),_:1}),e(u,{span:4,class:"center f-14"},{default:n(()=>[t("p",pt," - "+_(s(y)(s(h).useIntegral?s(h).money:0)),1)]),_:1})]),_:1})):x("",!0)]),t("div",ut,[e(I,{class:"pt10 pb10 mt10"},{default:n(()=>[e(u,{span:5,class:"uni-flex uni-row flex-middle"},{default:n(()=>[e(B,{to:"/cart/index",class:"rlink ml20 vertical-middle f-green"},{default:n(()=>[e(V,{size:12},{default:n(()=>[e(se)]),_:1}),ft]),_:1})]),_:1}),e(u,{span:19,class:"vertical-middle flex-end f-15"},{default:n(()=>[mt,t("span",ht,_(s(y)(s(c).paymoney)),1),e(le,{onClick:X,type:"primary",size:"large",class:"mr10"},{default:n(()=>[gt]),_:1})]),_:1})]),_:1})])])])):x("",!0)])),[[ne,S.value]]),!S.value&&Object.values(s(c)).length==0?(d(),p("div",yt,[vt,t("div",bt,[xt,e(B,{to:"/cart/index",class:"rlink f-blue f-13 f-yahei"},{default:n(()=>[wt,kt]),_:1})])])):x("",!0)])]),e(ye)],64)}}};var Ft=ve(Vt,[["__scopeId","data-v-e4682a3e"]]);export{Ft as default};
